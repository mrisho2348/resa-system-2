{% extends 'labtechnician_template/base_template.html' %}
{% load static %}

{% block title %}Lab Dashboard{% endblock title %}

{% block main_content %}
{% include "labtechnician_template/modal_form.html" %}

<section class="content">
  <div class="container-fluid">
    <!-- Page Title -->
    <div class="row mb-3">
      <div class="col">
        <h4 class="text-uppercase font-weight-bold text-primary">Lab Technician Dashboard</h4>
        <hr>
      </div>
    </div>

    <!-- Summary Boxes -->
    <div class="row">
      <!-- Total Lab Orders -->
      <div class="col-lg-4 col-md-6 col-sm-6 mb-4">
        <div class="small-box bg-info">
          <div class="inner">
            <h3>{{ total_lab_orders }}</h3>
            <p>Total Lab Orders</p>
          </div>
          <div class="icon">
            <i class="fas fa-vials"></i>
          </div>
          <a href="{% url 'lab_results_view' %}" class="small-box-footer">View Orders <i class="fas fa-arrow-circle-right"></i></a>
        </div>
      </div>

      <!-- Lab Records Summary -->
      <div class="col-lg-4 col-md-6 col-sm-6 mb-4">
        <div class="small-box bg-warning">
          <div class="inner">
            <h4>Lab Records</h4>
            <p>
              <span class="badge badge-warning">Pending: {{ lab_pending }}</span>
              <span class="badge badge-success">Completed: {{ lab_completed }}</span>
            </p>
          </div>
          <div class="icon">
            <i class="fas fa-vial"></i>
          </div>
          <a href="{% url 'lab_results_view' %}" class="small-box-footer">Manage Records <i class="fas fa-arrow-circle-right"></i></a>
        </div>
      </div>

      <!-- Reagents Expiring Soon -->
      <div class="col-lg-4 col-md-6 col-sm-6 mb-4">
        <div class="small-box bg-danger">
          <div class="inner">
            <h3>{{ reagents_expiring_soon }}</h3>
            <p>Reagents Expiring Soon</p>
          </div>
          <div class="icon">
            <i class="fas fa-exclamation-triangle"></i>
          </div>
          <a href="{% url 'lab_reagent_expiring_soon' %}" class="small-box-footer">Check List <i class="fas fa-arrow-circle-right"></i></a>
        </div>
      </div>

      <!-- Out of Stock Reagents -->
      <div class="col-lg-6 col-md-6 col-sm-6 mb-4">
        <div class="small-box bg-danger">
          <div class="inner">
            <h3>{{ reagents_out_of_stock }}</h3>
            <p>Out of Stock Reagents</p>
          </div>
          <div class="icon">
            <i class="fas fa-box-open"></i>
          </div>
          <a href="{% url 'lab_reagent_out_of_stock' %}" class="small-box-footer">Check Stock <i class="fas fa-arrow-circle-right"></i></a>
        </div>
      </div>

      <!-- Low Stock Reagents -->
      <div class="col-lg-6 col-md-6 col-sm-6 mb-4">
        <div class="small-box bg-secondary">
          <div class="inner">
            <h3>{{ reagents_low_stock }}</h3>
            <p>Low Stock Reagents (<= 5)</p>
          </div>
          <div class="icon">
            <i class="fas fa-sort-amount-down"></i>
          </div>
          <a href="{% url 'lab_reagent_out_of_stock' %}" class="small-box-footer">Review Inventory <i class="fas fa-arrow-circle-right"></i></a>
        </div>
      </div>
    </div>

  </div>
</section>

{% include 'labtechnician_template/datatable.html' %}
{% endblock main_content %}
