  <!-- Patient Registration Modal -->
<div class="modal fade" id="registerModal" tabindex="-1" role="dialog" aria-labelledby="registerModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="registerModalLabel">REGISTER PATIENT</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">Ã—</span>
        </button>
      </div>

      <div class="modal-body">
        <div id="patientmessageContainer" class="text-center mt-2"></div>

        <form id="patientForm" method="post">
          {% csrf_token %}

          <!-- Personal Information -->
          <div class="row">
            <div class="col-md-4">
              <div class="form-group">
                <label for="first_name">First Name: <span class="error">*</span></label>
                <input type="text" class="form-control" id="first_name" name="first_name" required>
                <div class="invalid-feedback">First name is required.</div>
              </div>
            </div>

            <div class="col-md-4">
              <div class="form-group">
                <label for="middle_name">Middle Name:</label>
                <input type="text" class="form-control" id="middle_name" name="middle_name">
              </div>
            </div>

            <div class="col-md-4">
              <div class="form-group">
                <label for="last_name">Last Name: <span class="error">*</span></label>
                <input type="text" class="form-control" id="last_name" name="last_name" required>
                <div class="invalid-feedback">Last name is required.</div>
              </div>
            </div>
          </div>

          <div class="row">
            <!-- Gender -->
            <div class="col-md-4">
              <div class="form-group">
                <label for="patient_gender">Gender: <span class="error">*</span></label>
                <select class="form-control select2bs4"  style="width: 100%;"  id="patient_gender" name="gender" required>
                  <option value="">Select Gender</option>
                  <option value="Male">Male</option>
                  <option value="Female">Female</option>       
                </select>
                <div class="invalid-feedback">Gender is required.</div>
              </div>
            </div>

            <!-- Date of Birth -->
            <div class="col-md-4">
              <div class="form-group">
                <label for="dob">Date of Birth:</label>
                <input type="date" class="form-control" id="dob" name="dob" min="1922-01-01" max="2024-12-31">
              </div>
            </div>

            <!-- Age -->
            <div class="col-md-4">
              <div class="form-group">
                <label for="age">Age:</label>
                <select class="form-control select2bs4"  style="width: 100%;"  id="age" name="age">
                  {% for age in range_121 %}
                    <option value="{{ age }}">{{ age }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>
          </div>

          <!-- Contact and Identity -->
          <div class="row">
            <!-- Phone -->
            <div class="form-group col-sm-4">
              <label for="phone" class="col-form-label">Phone Number</label>
              <input type="tel" class="form-control" id="phone" name="phone" required
                pattern="0\d{9}" maxlength="10"
                title="Please enter a valid phone number starting with '0' and having 10 digits">
              <div class="invalid-feedback">Please enter a valid phone number starting with '0'.</div>
            </div>

            <!-- NIDA Number -->
            <div class="form-group col-sm-4">
              <label for="nida_number" class="col-form-label">NIDA Number</label>
              <input type="text" class="form-control" name="nida_number" id="nida_number" placeholder="Optional">
            </div>

            <!-- Address -->
            <div class="form-group col-sm-4">
              <label for="Address" class="col-form-label">Address</label>
              <textarea id="Address" name="Address" rows="2" class="form-control" required></textarea>
            </div>
          </div>

          <!-- Nationality & Payment -->
          <div class="row">
            <div class="form-group col-sm-4">
              <label for="nationality" class="col-form-label">Nationality</label>
              <select class="form-control select2bs4"  style="width: 100%;"  name="nationality" id="nationality" required>
                {% for country in all_country %}
                  <option value="{{ country.id }}" {% if country.name == "Tanzania" %}selected{% endif %}>{{ country.name }}</option>
                {% endfor %}
              </select>
            </div>

            <div class="form-group col-sm-4">
              <label for="payment_type" class="col-form-label">Payment Type</label>
              <select class="form-control select2bs4"  style="width: 100%;"  name="payment_type" id="payment_type">
                <option value="Cash">Cash</option>
                <option value="Insurance">Insurance</option>
              </select>
            </div>

            <div class="form-group col-sm-4" id="insurance_name_container" style="display: none;">
              <label for="insurance_company" class="col-form-label">Insurance Name</label>
              <select class="form-control select2bs4"  style="width: 100%;"  name="insurance_company" id="insurance_company">
                <option value="">Select Insurance Company</option>
                <option value="NHIF">NHIF</option>
                <option value="Jubilee">Jubilee</option>
                <option value="Strategis">Strategis</option>
                <option value="Assemble">Assemble</option>
                <option value="Britam">Britam</option>
                <option value="ISOS">ISOS</option>
                <option value="International Insurance">International Insurance</option>
                <option value="Other">Other</option>
              </select>
            </div>

            <div class="form-group col-sm-4" id="insurance_details_container" style="display: none;">
              <label for="insurance_number" class="col-form-label">Insurance Number</label>
              <input type="text" class="form-control" name="insurance_number" id="insurance_number" placeholder="Insurance Number">
            </div>
          </div>

          <!-- Emergency Contact (Optional) -->
          <div class="row">
            <div class="col-md-4">
              <div class="form-group">
                <label for="emergency_contact_name">Emergency Contact Name:</label>
                <input type="text" class="form-control" id="emergency_contact_name" name="emergency_contact_name">
              </div>
            </div>

            <div class="col-md-4">
              <div class="form-group">
                <label for="patientemergency_contact_relation">Emergency Contact Relation:</label>
                <select class="form-control select2bs4" style="width: 100%;"  id="patientemergency_contact_relation" name="emergency_contact_relation">
                  <option value="">Select Relation</option>
                  <option value="Spouse">Spouse</option>
                  <option value="Friend">Friend</option>
                  <option value="Coworker">Coworker</option>
                  <option value="Child">Child</option>
                  <option value="Father">Father</option>
                  <option value="Mother">Mother</option>
                  <option value="Brother">Brother</option>
                  <option value="Sister">Sister</option>
                  <option value="Relative">Relative</option>
                  <option value="Other">Other</option>
                </select>
              </div>
            </div>

            <div class="col-md-4">
              <div class="form-group">
                <label for="emergency_contact_phone">Emergency Contact Phone:</label>
                <input type="tel" class="form-control" id="emergency_contact_phone" name="emergency_contact_phone"
                  pattern="0\d{9}" maxlength="10"
                  title="Please enter a valid phone number starting with '0' and having 10 digits">
              </div>
            </div>
          </div>

          <!-- Submit -->
          <div class="form-group">
            <div class="row">
              <div class="col-md-12">
                <button type="button" class="btn btn-md btn-primary btn-block" id="addPatient">
                  Save and Continue <i class="mdi mdi-forward"></i>
                </button>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>




