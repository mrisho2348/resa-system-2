{% load static %}
<aside class="main-sidebar sidebar-dark-primary elevation-4">
  <!-- Brand Logo -->
  <a href="#" class="brand-link bg-gradient-primary">
    <div class="brand-container d-flex align-items-center">
      <div class="brand-logo-container">
        <img src="{% static 'img/resalogo_square.png' %}" 
             alt="RESA LOGO" 
             class="img-circle shadow-lg"
             style="
               width: 50px; 
               height: 50px; 
               object-fit: cover; 
               border-radius: 50%; 
               border: 3px solid #ffffff;
               background-color: #ffffff;
             ">
      </div>
      <div class="brand-text-container ml-2">
        <span class="brand-text font-weight-bold">RESA MEDICAL</span>
        <div class="brand-subtext text-xs">Healthcare Management System</div>
      </div>
    </div>
  </a>

  <!-- Sidebar -->
  <div class="sidebar"> 
    <!-- Sidebar user panel -->
    <div class="user-panel mt-3 pb-3 mb-3 d-flex">
      {% if request.user.staff.role == "admin" %}
        <div class="image">
          {% if user.staff.profile_picture %}
            <img src="{{ user.staff.profile_picture.url }}" class="img-circle elevation-2" alt="User Image">
          {% else %}
            <img src="{% static 'dist/img/user2-160x160.jpg' %}" class="img-circle elevation-2" alt="User Image">
          {% endif %}
        </div>
        <div class="info">
          {% url 'resa_admin_edit_staff_profile' user.staff.id as edit_staff_profile %}
          <a href="{{ edit_staff_profile }}" class="d-block font-weight-bold">{{ user.username }}</a>
          <div class="user-status text-success">
            <i class="fas fa-circle"></i> Online
          </div>
          <div class="user-role text-xs">{{ user.staff.get_role_display }}</div>
        </div>   
      {% else %}
        <div class="image">           
          <img src="{% static 'dist/img/user2-160x160.jpg' %}" class="img-circle elevation-2" alt="User Image">          
        </div>
        <div class="info">
          <span class="d-block text-white font-weight-bold">{{ user.username }}</span>
          <div class="user-status text-success">
            <i class="fas fa-circle"></i> Online
          </div>
          <div class="user-role text-xs">{{ user.staff.get_role_display }}</div>
        </div>
      {% endif %}
    </div>   

    
    <!-- Sidebar Menu -->
    <nav class="mt-2">
      <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
        <!-- Dashboard Section -->
        <li class="nav-header text-uppercase text-xs text-muted mb-1">Dashboard</li>
        <li class="nav-item">
          {% url 'resa_admin_dashboard' as admin_home_url %}
          <a href="{{ admin_home_url }}" class="nav-link {% if request.path == admin_home_url %} active {% endif %}">
            <i class="nav-icon fas fa-home"></i>
            <p>Dashboard</p>
          </a>
        </li>              

        <!-- Clinic Management Section -->
        <li class="nav-header text-uppercase text-xs text-muted mb-1 mt-3">Clinic Management</li>
        <li class="nav-item has-treeview">
          <a href="#" class="nav-link">
            <i class="nav-icon fas fa-hospital text-primary"></i>
            <p>Clinic Operations</p>
            <i class="fas fa-angle-left right"></i>
          </a>
          <ul class="nav nav-treeview">
            <li class="nav-item">
              {% url 'resa_admin_manage_patient' as manage_patient_url %}
              <a href="{{ manage_patient_url }}" class="nav-link{% if request.path == manage_patient_url %} active {% endif %}">
                <i class="nav-icon fas fa-user-injured"></i>
                <p>Patient Management</p>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_appointment_list' as appointment_list_url %}
              <a href="{{ appointment_list_url }}" class="nav-link{% if request.path == appointment_list_url %} active {% endif %}">
                <i class="nav-icon fas fa-calendar-check"></i>
                <p>Appointments</p>
                <span class="badge badge-info float-right">14</span>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_referral_list' as manage_referral_url %}
              <a href="{{ manage_referral_url }}" class="nav-link{% if request.path == manage_referral_url %} active {% endif %}">
                <i class="nav-icon fas fa-hand-holding-medical"></i>
                <p>Referral System</p>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_counseling_list' as counseling_list %}
              <a href="{% url 'resa_admin_counseling_list' %}" class="nav-link{% if request.path == counseling_list %} active {% endif %}">
                <i class="nav-icon fas fa-comments"></i>
                <p>Counseling</p>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_discharge_list' as discharge_notes_list %}
              <a href="{% url 'resa_admin_discharge_list' %}" class="nav-link{% if request.path == discharge_notes_list %} active {% endif %}">
                <i class="nav-icon fas fa-file-medical-alt"></i>
                <p>Discharge Notes</p>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_observation_list' as observation_record_list %}
              <a href="{% url 'resa_admin_observation_list' %}" class="nav-link{% if request.path == observation_record_list %} active {% endif %}">
                <i class="nav-icon fas fa-stethoscope"></i>
                <p>Observation Records</p>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_all_orders' as all_orders_view_url %}
              <a href="{{ all_orders_view_url }}" class="nav-link{% if request.path == all_orders_view_url %} active {% endif %}">
                <i class="nav-icon fas fa-receipt"></i>
                <p>Billing & Orders</p>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_financial_analytics' as financial_analytics_url %}
              <a href="{{ financial_analytics_url }}" class="nav-link{% if request.path == financial_analytics_url %} active {% endif %}">
                <i class="nav-icon fas fa-receipt"></i>
                <p>Financial</p>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_reports_adjustments' as resa_admin_reports_adjustments_url %}
              <a href="{{ resa_admin_reports_adjustments_url }}" class="nav-link{% if request.path == resa_admin_reports_adjustments_url %} active {% endif %}">
                <i class="nav-icon fas fa-chart-bar"></i>
                <p>Reports & Analytics</p>
              </a>
            </li>
          </ul>
        </li>

        <!-- Pharmacy Section -->
        <li class="nav-header text-uppercase text-xs text-muted mb-1 mt-3">Pharmacy</li>
        <li class="nav-item has-treeview">
          <a href="#" class="nav-link">
            <i class="nav-icon fas fa-pills text-success"></i>
            <p>Pharmacy Management</p>
            <i class="fas fa-angle-left right"></i>
          </a>
          <ul class="nav nav-treeview">
            <li class="nav-item">
              {% url 'resa_admin_medicine_list' as medicine_list_url %}
              <a href="{{ medicine_list_url }}" class="nav-link{% if request.path == medicine_list_url %} active {% endif %}">                           
                <i class="nav-icon fas fa-capsules"></i>
                <p>Medicine Inventory</p>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_manage_medicine_types' as manage_medicine_types %}
              <a href="{{ manage_medicine_types }}" class="nav-link{% if request.path == manage_medicine_types %} active {% endif %}">                           
                <i class="nav-icon fas fa-capsules"></i>
                <p>Medicine Type</p>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_medicine_dosage_management' as medicine_dosage_management %}
              <a href="{{ medicine_dosage_management }}" class="nav-link{% if request.path == medicine_dosage_management %} active {% endif %}">                           
                <i class="nav-icon fas fa-capsules"></i>
                <p>Medicine Dosage</p>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_in_stock_medicines' as in_stock_medicines_url %}
              <a href="{{ in_stock_medicines_url }}" class="nav-link{% if request.path == in_stock_medicines_url %} active {% endif %}">
                <i class="nav-icon fas fa-check-circle text-success"></i>
                <p>Available Medicines</p> 
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_out_of_stock_medicines' as out_of_stock_medicines_url %}
              <a href="{{ out_of_stock_medicines_url }}" class="nav-link{% if request.path == out_of_stock_medicines_url %} active {% endif %}">
                <i class="nav-icon fas fa-exclamation-triangle text-warning"></i> 
                <p>Stock Alerts</p>
                <span id="notification-count" class="badge badge-danger float-right" title="medicine out of Stock"></span> 
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_medicine_routes' as medicine_routes_url %}
              <a href="{{ medicine_routes_url }}" class="nav-link{% if request.path == medicine_routes_url %} active {% endif %}">                           
                <i class="nav-icon fas fa-route"></i>
                <p>Administration Routes</p>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_medicine_unit_measures' as medicine_unit_measures_url %}
              <a href="{{ medicine_unit_measures_url }}" class="nav-link{% if request.path == medicine_unit_measures_url %} active {% endif %}">                           
                <i class="nav-icon fas fa-balance-scale"></i> 
                <p>Unit Measures</p>
              </a>
            </li>
          </ul>
        </li>

        <!-- Clinical Services Section -->
        <li class="nav-header text-uppercase text-xs text-muted mb-1 mt-3">Clinical Services</li>
        <li class="nav-item has-treeview">
          <a href="#" class="nav-link">
            <i class="nav-icon fas fa-user-md text-info"></i>
            <p>Clinical Services</p>
            <i class="fas fa-angle-left right"></i>
          </a>
          <ul class="nav nav-treeview">
            <li class="nav-item">
              {% url 'resa_admin_prescription_list' as prescription_list_url %}
              <a href="{{ prescription_list_url }}" class="nav-link{% if request.path == prescription_list_url %} active {% endif %}">
                <i class="nav-icon fas fa-prescription-bottle-alt"></i>
                <p>Prescriptions</p>
                <span id="unreadPrescriptionBadge" class="badge badge-danger float-right">0</span>
              </a>
            </li>
             {% url 'resa_admin_walkin_prescription_list' as walkin_prescription_list_url %}
            <li class="nav-item">
              <a href="{{ walkin_prescription_list_url }}" class="nav-link reception-nav-link {% if request.path == walkin_prescription_list_url %} active {% endif %}">
                <i class="nav-icon fas fa-prescription-bottle"></i>
                <p>Walking</p>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_prescription_frequency_list' as prescription_frequency_list_url %}
              <a href="{{ prescription_frequency_list_url }}" class="nav-link{% if request.path == prescription_frequency_list_url %} active {% endif %}">
                <i class="nav-icon fas fa-clock"></i>
                <p>Dosage Frequencies</p>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_consultation_notes' as new_consultation_order_url %}
              <a href="{{ new_consultation_order_url }}" class="nav-link {% if request.path == new_consultation_order_url %} active {% endif %}">
                <i class="nav-icon fas fa-file-medical"></i>
                <p>Consultation Notes</p>
                <span id="unreadConsultationOrderBadge" class="badge badge-danger float-right">0</span>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_patient_imaging' as new_radiology_order_url %}
              <a href="{{ new_radiology_order_url }}" class="nav-link {% if request.path == new_radiology_order_url %} active {% endif %}">
                <i class="nav-icon fas fa-x-ray"></i>
                <p>Radiology</p>
                <span id="unreadRadiologyOrderBadge" class="badge badge-danger float-right">0</span>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_patient_procedure' as new_procedure_order_url %}
              <a href="{{ new_procedure_order_url }}" class="nav-link {% if request.path == new_procedure_order_url %} active {% endif %}">
                <i class="nav-icon fas fa-procedures"></i>
                <p>Procedures</p>
                <span id="unreadProcedureOrderBadgeCount" class="badge badge-danger float-right">0</span>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_patient_laboratory' as patient_laboratory_view_url %}
              <a href="{{ patient_laboratory_view_url }}" class="nav-link {% if request.path == patient_laboratory_view_url %} active {% endif %}">
                <i class="nav-icon fas fa-flask"></i>
                <p>Laboratory</p>
                <span class="badge badge-danger float-right">0</span>
              </a>
            </li>
          </ul>
        </li>

        <!-- Support Services Section -->
        <li class="nav-header text-uppercase text-xs text-muted mb-1 mt-3">Support Services</li>
        <li class="nav-item has-treeview">
          <a href="#" class="nav-link">
            <i class="nav-icon fas fa-ambulance text-warning"></i>
            <p>Ambulance Services</p>
            <i class="fas fa-angle-left right"></i>
          </a>
          <ul class="nav nav-treeview">
            <li class="nav-item">
              {% url 'resa_admin_ambulance_order' as ambulance_order_url %}
              <a href="{{ ambulance_order_url }}" class="nav-link{% if request.path == ambulance_order_url %} active {% endif %}">
                <i class="nav-icon fas fa-ambulance"></i>
                <p>Ambulance Orders</p>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_vehicle_ambulance_view' as vehicle_ambulance_view_url %}
              <a href="{{ vehicle_ambulance_view_url }}" class="nav-link{% if request.path == vehicle_ambulance_view_url %} active {% endif %}">
                <i class="nav-icon fas fa-car-side"></i>
                <p>Other Services</p>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_ambulance_route_list' as ambulance_route_list_url %}
              <a href="{{ ambulance_route_list_url }}" class="nav-link{% if request.path == ambulance_route_list_url %} active {% endif %}">
                <i class="nav-icon fas fa-route"></i>
                <p>Route Management</p>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_hospital_vehicle_list' as admin_hospital_vehicle_list_url %}
              <a href="{{ admin_hospital_vehicle_list_url }}" class="nav-link{% if request.path == admin_hospital_vehicle_list_url %} active {% endif %}">
                <i class="nav-icon fas fa-truck-monster"></i>
                <p>Fleet Management</p>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_ambulance_activity_list' as ambulance_activity_list_url %}
              <a href="{{ ambulance_activity_list_url }}" class="nav-link{% if request.path == ambulance_activity_list_url %} active {% endif %}">
                <i class="nav-icon fas fa-clipboard-list"></i>
                <p>Activity Logs</p>
              </a>
            </li>
          </ul>
        </li>

        <!-- System Settings Section -->
        <li class="nav-header text-uppercase text-xs text-muted mb-1 mt-3">System Configuration</li>
        <li class="nav-item has-treeview">
          <a href="#" class="nav-link">
            <i class="nav-icon fas fa-cog text-danger"></i>
            <p>System Settings</p>
            <i class="fas fa-angle-left right"></i>
          </a>
          <ul class="nav nav-treeview">
            <li class="nav-item">
              {% url 'resa_admin_manage_staff' as manage_staff_url %}
              <a href="{{ manage_staff_url }}" class="nav-link{% if request.path == manage_staff_url %} active {% endif %}">
                <i class="nav-icon fas fa-user-md"></i>
                <p>Staff Management</p>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_manage_service' as manage_service_url %}
              <a href="{{ manage_service_url }}" class="nav-link{% if request.path == manage_service_url %} active {% endif %}">
                <i class="nav-icon fas fa-procedures"></i>
                <p>Service Catalog</p>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_manage_disease' as manage_disease %}
              <a href="{% url 'resa_admin_manage_disease' %}" class="nav-link{% if request.path == manage_disease %} active {% endif %}">
                <i class="nav-icon fas fa-viruses"></i>
                <p>Disease Registry</p>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_diagnosis_list' as diagnosis_list_url %}
              <a href="{{ diagnosis_list_url }}" class="nav-link{% if request.path == diagnosis_list_url %} active {% endif %}">
                <i class="nav-icon fas fa-diagnoses"></i>
                <p>Diagnosis Codes</p>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_manage_pathodology' as manage_pathodology_url %}
              <a href="{{ manage_pathodology_url }}" class="nav-link{% if request.path == manage_pathodology_url %} active {% endif %}">
                <i class="nav-icon fas fa-microscope"></i>
                <p>Pathology Records</p>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_health_record_list' as health_record_list_url %}
              <a href="{{ health_record_list_url }}" class="nav-link{% if request.path == health_record_list_url %} active {% endif %}">                     
                <i class="nav-icon fas fa-file-medical-alt"></i> 
                <p>Chief Complaints</p>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_equipment_list' as equipment_list_url %}
              <a href="{{ equipment_list_url }}" class="nav-link{% if request.path == equipment_list_url %} active {% endif %}">
                <i class="nav-icon fas fa-tools"></i>
                <p>Equipment Inventory</p>
              </a>
            </li>
            <li class="nav-item">
              {% url 'resa_admin_reagent_list' as reagent_list_url %}
              <a href="{{ reagent_list_url }}" class="nav-link{% if request.path == reagent_list_url %} active {% endif %}">
                <i class="nav-icon fas fa-vial"></i>
                <p>Reagent Inventory</p>
              </a>
            </li>
          </ul>
        </li>
      </ul>
    </nav>
  </div>
</aside>

<!-- Add this CSS -->
<style>
  /* Add these styles for search functionality */
  .no-results {
    display: none;
    padding: 10px;
    text-align: center;
    color: #ff6b6b;
    font-size: 0.85rem;
    margin-top: 5px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
  }
  
  .search-highlight {
    background-color: rgba(255, 235, 59, 0.3);
    color: #fff;
    padding: 0 2px;
    border-radius: 3px;
  }
  
  .nav-item.search-hidden {
    display: none !important;
  }
  
  .nav-header.search-hidden {
    display: none !important;
  }
</style>
<style>
  /* Sidebar Styling */
  .main-sidebar {
    background: linear-gradient(to bottom, #1e3c72, #2a5298);
    box-shadow: 3px 0 15px rgba(0, 0, 0, 0.15);
  }
  
  .brand-link {
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding: 15px 20px;
    background: linear-gradient(135deg, #1a2980, #26d0ce);
  }
  
  .brand-container {
    display: flex;
    align-items: center;
  }
  
  .brand-text {
    font-size: 1.2rem;
    font-weight: 700;
    letter-spacing: 0.5px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
  }
  
  .brand-subtext {
    font-size: 0.7rem;
    opacity: 0.8;
    letter-spacing: 0.5px;
  }
  
  .user-panel {
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding: 15px;
  }
  
  .user-status {
    font-size: 0.75rem;
    margin-top: 3px;
  }
  
  .user-role {
    font-size: 0.8rem;
    opacity: 0.8;
    margin-top: 2px;
  }
  
  .sidebar-search {
    margin-top: 10px;
  }
  
  .nav-header {
    padding: 8px 20px;
    font-size: 0.75rem;
    letter-spacing: 1px;
    margin-top: 10px;
  }
  
  .nav-link {
    padding: 12px 15px;
    margin: 3px 10px;
    border-radius: 8px;
    transition: all 0.3s ease;
  }
  
  .nav-link:hover:not(.active) {
    background: rgba(255, 255, 255, 0.1);
  }
  
  .nav-link.active {
    background: linear-gradient(135deg, #3494e6, #ec6ead);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
  }
  
  .nav-treeview .nav-link {
    padding: 10px 15px 10px 45px;
    margin: 2px 0;
    border-radius: 0;
    border-left: 3px solid transparent;
  }
  
  .nav-treeview .nav-link:hover {
    border-left: 3px solid #3498db;
    background: rgba(255, 255, 255, 0.05);
  }
  
  .nav-treeview .nav-link.active {
    border-left: 3px solid #3498db;
    background: rgba(52, 152, 219, 0.2);
  }
  
  .nav-icon {
    font-size: 1.1rem;
    margin-right: 10px;
    min-width: 25px;
    text-align: center;
  }
  
  .badge {
    font-weight: 500;
    padding: 4px 7px;
    font-size: 0.75rem;
  }
  
  /* Animation for nav items */
  .nav-item {
    transition: transform 0.3s ease;
  }
  
  .nav-item:hover {
    transform: translateX(5px);
  }
  
  /* Responsive adjustments */
  @media (max-width: 768px) {
    .brand-text {
      font-size: 1rem;
    }
    
    .brand-subtext {
      display: none;
    }
    
    .user-panel .info {
      display: none;
    }
  }
</style>

<script>
  // Function to update medicine stock notification count
  function updateNotificationCount() {
    $.ajax({
      url: '{% url "resa_admin_out_of_stock_count" %}',
      method: 'GET',
      dataType: 'json',
      success: function(data) {
        var count = data.count || 0;
        $('#notification-count').text(count);
      },
      error: function(xhr, status, error) {
        console.error('Error fetching notification count:', error);
      }
    });
  }

  // Function to update reagent stock notification count
  function ReagentOutNotificationCount() {
    $.ajax({
      url: '{% url "resa_admin_reagent_out_of_stock_count" %}',
      method: 'GET',
      dataType: 'json',
      success: function(data) {
        var count = data.count || 0;
        $('#notification-count-reagent').text(count);
      },
      error: function(xhr, status, error) {
        console.error('Error fetching reagent count:', error);
      }
    });
  }  
  
  // Initialize notification counts on page load
  $(document).ready(function() {
    updateNotificationCount();
    ReagentOutNotificationCount();
  
    // Update notifications periodically
    setInterval(updateNotificationCount, 60000);
    setInterval(ReagentOutNotificationCount, 60000);
  });
  
  // Function to fetch prescription counts
  function fetchPrescriptionCounts() {
    $.ajax({
      url: "{% url 'resa_admin_fetch_prescription_counts' %}",
      type: "GET",
      success: function(response) {
        $('#unreadPrescriptionBadge').text(response.total_prescriptions || 0);
      },
      error: function(error) {
        console.log("Error fetching prescription counts: ", error);
      }
    });
  }
  
  // Function to fetch consultation order counts
  function fetchConsultationOrderCounts() {
    $.ajax({
      url: "{% url 'resa_admin_fetch_order_counts' %}",
      type: "GET",
      success: function(response) {
        $('#unreadConsultationOrderBadge').text(response.unread_count || 0);
      },
      error: function(error) {
        console.log("Error fetching consultation counts: ", error);
      }
    });
  }
  
  // Function to fetch radiology order counts
  function fetchRadiologyOrderCounts() {
    $.ajax({
      url: "{% url 'resa_admin_fetch_radiology_order_counts' %}",
      type: "GET",
      success: function(response) {
        $('#unreadRadiologyOrderBadge').text(response.unread_count || 0);
      },
      error: function(error) {
        console.log("Error fetching radiology counts: ", error);
      }
    });
  }
  
  // Function to fetch procedure order counts
  function fetchProcedureOrderCounts() {
    $.ajax({
      url: "{% url 'resa_admin_fetch_procedure_order_counts' %}",
      type: "GET",
      success: function(response) {
        $('#unreadProcedureOrderBadgeCount').text(response.unread_count || 0);
      },
      error: function(error) {
        console.log("Error fetching procedure counts: ", error);
      }
    });
  }
  
  // Initialize counts on page load and set intervals
  $(document).ready(function() {   
    fetchPrescriptionCounts();
    fetchConsultationOrderCounts();
    fetchRadiologyOrderCounts();
    fetchProcedureOrderCounts();
    
    // Update counts periodically
    setInterval(fetchPrescriptionCounts, 5000);
    setInterval(fetchConsultationOrderCounts, 5000);
    setInterval(fetchRadiologyOrderCounts, 5000);
    setInterval(fetchProcedureOrderCounts, 5000);
    
    // Add sidebar toggle animation
    $('.nav-link > .fas.fa-angle-left').parent().on('click', function() {
      $(this).find('.fa-angle-left').toggleClass('fa-rotate-90');
    });
  });
</script>