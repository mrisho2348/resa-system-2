


<div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">Add Consultation Notes</div>
                    <div class="card-body">
                        <form id="addConsultationForm" action="{% url 'kahama_doctor_consultation_save' patient.id visit.id %}" method="post">
                            {% csrf_token %}
                            <div class="container-fluid">                             

                               <!-- Consultation Text Areas -->
                                <div class="row">                               
                                <div class="col-md-6">
                                    <div class="form-group">
                                      <label for="hpi">History of Presenting Illness (HPI):</label>
                                      <textarea class="form-control" id="hpi" name="history_of_presenting_illness" rows="10">{{ consultation_note.history_of_presenting_illness }}</textarea>

                                      <!-- Tabs Navigation -->
                                      <ul class="nav nav-tabs mt-3" id="hpiTab" role="tablist">
                                        <li class="nav-item">
                                          <a class="nav-link active" id="general-tab" data-toggle="tab" href="#general" role="tab">General</a>
                                        </li>
                                        <li class="nav-item">
                                          <a class="nav-link" id="resp-tab" data-toggle="tab" href="#resp" role="tab">Respiratory</a>
                                        </li>
                                        <li class="nav-item">
                                          <a class="nav-link" id="abd-tab" data-toggle="tab" href="#abd" role="tab">Abdomen & GI</a>
                                        </li>
                                        <li class="nav-item">
                                          <a class="nav-link" id="uro-tab" data-toggle="tab" href="#uro" role="tab">Urogenital</a>
                                        </li>
                                        <li class="nav-item">
                                          <a class="nav-link" id="msk-tab" data-toggle="tab" href="#msk" role="tab">Musculoskeletal</a>
                                        </li>
                                        <li class="nav-item">
                                          <a class="nav-link" id="derma-tab" data-toggle="tab" href="#derma" role="tab">Dermatology</a>
                                        </li>
                                      </ul>

                                      <!-- Tabs Content -->
                                      <div class="tab-content border border-top-0 p-3" id="hpiTabContent">
                                        <!-- General -->
                                        <div class="tab-pane fade show active" id="general" role="tabpanel">
                                          <button type="button" class="btn btn-sm btn-outline-danger ml-2 mb-2" data-toggle="modal" data-target="#feverModal">Fever</button>
                                          <button type="button"  class="btn btn-sm btn-outline-warning ml-2 mb-2" data-toggle="modal" data-target="#headacheModal">Headache</button>
                                          <button type="button"  class="btn btn-sm btn-outline-success ml-2 mb-2" data-toggle="modal" data-target="#gbmModal">Generalized Malaise</button>
                                        </div>

                                        <!-- Respiratory -->
                                        <div class="tab-pane fade" id="resp" role="tabpanel">
                                          <button type="button"  class="btn btn-sm btn-outline-info ml-2 mb-2" data-toggle="modal" data-target="#fluModal">Flu</button>
                                          <button type="button"  class="btn btn-sm btn-outline-warning ml-2 mb-2" data-toggle="modal" data-target="#coughModal">Cough</button>
                                          <button type="button"  class="btn btn-sm btn-outline-danger ml-2 mb-2" data-toggle="modal" data-target="#dibModal">Difficulty in Breathing</button>
                                          <button type="button"  class="btn btn-sm btn-outline-warning ml-2 mb-2" data-toggle="modal" data-target="#chestPainModal">Chest Pain</button>
                                        </div>

                                        <!-- Abdomen & GI -->
                                        <div class="tab-pane fade" id="abd" role="tabpanel">
                                          <button type="button"  class="btn btn-sm btn-outline-success ml-2 mb-2" data-toggle="modal" data-target="#gaseousDiscomfortModal">Gaseous Discomfort</button>
                                          <button type="button"  class="btn btn-sm btn-outline-primary ml-2 mb-2" data-toggle="modal" data-target="#abdominalPainModal">Abdominal Pain</button>
                                          <button type="button"  class="btn btn-sm btn-outline-primary ml-2 mb-2" data-toggle="modal" data-target="#lowerAbdPainModal">Lower Abdominal Pain</button>
                                          <button type="button"  class="btn btn-sm btn-outline-primary ml-2 mb-2" data-toggle="modal" data-target="#constipationModal">Constipation</button>
                                        </div>

                                        <!-- Urogenital -->
                                        <div class="tab-pane fade" id="uro" role="tabpanel">
                                          <button type="button"  class="btn btn-sm btn-outline-primary ml-2 mb-2" data-toggle="modal" data-target="#pvDischargeModal">PV Discharge</button>
                                          <button type="button"  class="btn btn-sm btn-outline-danger ml-2 mb-2" data-toggle="modal" data-target="#painfulMicturitionModal">Painful Micturition</button>
                                        </div>

                                        <!-- Musculoskeletal -->
                                        <div class="tab-pane fade" id="msk" role="tabpanel">
                                          <button type="button"  class="btn btn-sm btn-outline-warning ml-2 mb-2" data-toggle="modal" data-target="#backPainModal">Back Pain</button>
                                          <button type="button"   class="btn btn-sm btn-outline-info ml-2 mb-2" data-toggle="modal" data-target="#jointPainModal">Joint Pain</button>
                                        </div>

                                        <!-- Dermatology -->
                                        <div class="tab-pane fade" id="derma" role="tabpanel">
                                          <button type="button"   class="btn btn-sm btn-outline-danger ml-2 mb-2" data-toggle="modal" data-target="#rashesModal">Rashes</button>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                                                      <!-- ROS -->
                                    <div class="col-md-6">
                                        <div class="form-group">
                                        <label for="ros">Review of Other Systems (ROS):</label>
                                        <textarea class="form-control" id="ros" name="review_of_systems" rows="10" required>{{ consultation_note.review_of_systems|default:'' }}</textarea>
                                        <button type="button" class="btn btn-sm btn-outline-primary mt-2" data-toggle="modal" data-target="#rosModal">Edit in Modal</button>
                                      </div>
                                      </div>
                                  </div>

                                  <!-- Physical Examination -->
                                  <div class="row mt-3">
                                      <div class="col-md-12">
                                          <div class="card">
                                              <div class="card-header">
                                                  <h6 class="text-center text-uppercase">Physical Examination</h6>
                                              </div>
                                              <div class="card-body">
                                                  <div class="form-group">
                                                      <label for="physical_examination">Physical Examination Notes:</label>
                                                      <textarea class="form-control" id="physical_examination" name="physical_examination" rows="10" required>{{ consultation_note.physical_examination|default:'' }}</textarea>
                                                      <button type="button" class="btn btn-sm btn-outline-primary mt-2" data-toggle="modal" data-target="#physicalExamModal">Edit in Modal</button>
                                                  </div>
                                              </div>
                                          </div>
                                      </div>
                                  </div>

                                  <!-- Provisional Diagnosis -->
                                  <div class="form-group mt-4">
                                      <label for="provisional_diagnosis_{{ consultation_note.id }}">Provisional Diagnosis:</label>
                                      <select class="form-control select2bs4" id="provisional_diagnosis_{{ consultation_note.id }}" name="provisional_diagnosis[]" multiple required>
                                          {% for diagnosis in provisional_diagnoses %}
                                              <option value="{{ diagnosis.id }}" {% if diagnosis.id in provisional_diagnosis_ids %}selected{% endif %}>{{ diagnosis }}</option>
                                          {% endfor %}
                                      </select>
                                  </div>
                                    <!-- Pathology -->
                                      <div class="form-group">
                                          <label for="pathology{{ consultation_note.id }}">Pathology:</label>
                                          <select class="form-control select2bs4" style="width: 100%;"
                                                  id="pathology{{ consultation_note.id }}"
                                                  name="pathology[]" required multiple>
                                              {% for record in pathology_records %}
                                                  <option value="{{ record.id }}" {% if record in consultation_note.pathology.all %}selected{% endif %}>{{ record.name }}</option>
                                              {% endfor %}
                                          </select>
                                      </div>
                                  <div class="form-group mt-4">                                        
                                              <label for="doctor_plan_note">Doctor Plan note:</label>
                                              <textarea class="form-control" id="doctor_plan_note" name="doctor_plan_note" rows="2" required>{{ consultation_note.doctor_plan_note|default:'' }}</textarea>                                           
                                    </div>
                                  <!-- Doctor's Plan -->
                                  <div class="form-group mt-3">
                                      <label for="doctor_plan">Doctor Plan:</label>
                                          <select class="form-control select2bs4" style="width: 100%;" id="doctor_plan" name="doctor_plan" 
                                                      {% if consultation_note.doctor_plan == 'Referral' and previous_referrals %} disabled 
                                                      {% elif consultation_note.doctor_plan == 'Discharge' and previous_discharges %} disabled 
                                              {% endif %} required>
                                                  <option value="">Select Doctor Plan</option>
                                                  <option value="Prescription" {% if consultation_note.doctor_plan == 'Prescription' %} selected {% endif %}>Prescription</option>
                                                  <option value="Laboratory" {% if consultation_note.doctor_plan == 'Laboratory' %} selected {% endif %}>Laboratory</option>                                          
                                                  <option value="Procedure" {% if consultation_note.doctor_plan == 'Procedure' %} selected {% endif %}>Procedure</option>
                                                  <option value="Observation" {% if consultation_note.doctor_plan == 'Observation' %} selected {% endif %}>Observation</option>
                                                  <option value="Referral" {% if consultation_note.doctor_plan == 'Referral' %} selected {% endif %}>Referral</option>
                                                  <option value="Counselling" {% if consultation_note.doctor_plan == 'Counselling' %} selected {% endif %}>Counselling</option>
                                                  <option value="Discharge" {% if consultation_note.doctor_plan == 'Discharge' %} selected {% endif %}>Discharge</option>
                                              </select>
                                        
                                          </div>
                                          
                                          {% if consultation_note.doctor_plan == 'Referral' and previous_referrals %}
                                          <input type="hidden" name="doctor_plan" value="{{ consultation_note.doctor_plan }}">
                                      {% elif consultation_note.doctor_plan == 'Discharge' and previous_discharges %}
                                          <input type="hidden" name="doctor_plan" value="{{ consultation_note.doctor_plan }}">
                                      {% endif %}
                                  </div>
                                  
                                  <!-- Submit Button -->
                                  <div class="form-row mt-4">
                                      <div class="col-md-12">
                                          <button type="submit" class="btn btn-primary btn-block">Save & Continue</button>
                                      </div>
                                  </div>
                                  <div class="card-footer">
                                          {% if messages %}
                                          <div class="row">
                                              <div class="col-12">
                                                  {% for message in messages %}
                                                  {% if message.tags == 'error' %}
                                                  <div class="alert alert-danger alert-message">{{ message }}</div>
                                                  {% elif message.tags == 'success' %}
                                                  <div class="alert alert-primary alert-message">{{ message }}</div>
                                                  {% endif %}
                                                  {% endfor %}
                                              </div>
                                          </div>
                                          {% endif %}
                                      </div>
                              </div>
                        </form>
                    </div>
            </div>


             <div class="col-md-6">
                    <label for="physical_examination">Patient Health Records</label>
                    <div class="row">
                        <div class="col-md-12">
                            <!-- Health Condition -->
                        {% if health_conditions %}
                        <div class="card">
                            <div class="card-header">
                                <h6 class="header-title text-center mt-0 mb-1 text-uppercase">Chronic Illness Conditions</h6>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover text-nowrap table-responsive-sm table-bordered table-striped table-sm display" id="health_conditions_table" style="width:100%">
                                        <thead>
                                            <tr>
                                                <th>Chronic Illness</th>
                                                <th>Details of Chronic Illness</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for health_condition in health_conditions %}
                                            <tr>
                                                <td>{{ health_condition.health_condition }}</td>
                                                <td>{{ health_condition.health_condition_notes }}</td>
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        {% endif %}

                    <!-- Medication Allergies -->
                        {% if allergies  %}
                        <div class="card">
                            <div class="card-header">
                                <h6 class="header-title text-center mt-0 mb-1 text-uppercase">Medication Allergies</h6>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover text-nowrap table-responsive-sm table-bordered table-striped table-sm display" id="medication_allergies_table" style="width:100%">
                                        <thead>
                                            <tr>
                                                <th>Drug Name</th>
                                                <th>details</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for allergy in allergies %}
                                            <tr>
                                                <td>{{ allergy.medicine_name }}</td>
                                                <td>{{ allergy.reaction }}</td>
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        {% endif %}

                        {% if family_history %}
                                    <!-- Family Medical History -->
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="header-title text-center mt-0 mb-1 text-uppercase">Family Medical History</h6>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover text-nowrap table-responsive-sm table-bordered table-striped table-sm display" id="family_medical_history_table" style="width:100%">
                                            <thead>
                                                <tr>
                                                    <th>Condition</th>
                                                    <th>Relationship</th>
                                                    <th>Comments</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for history in family_history %}
                                                <tr>
                                                    <td>{{ history.condition }}</td>
                                                    <td>{{ history.relationship }}</td>
                                                    <td>{{ history.comments }}</td>
                                                </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        {% endif %}

                        {% if patient_surgeries %}
                        <!-- Patient Surgery Information-->
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="header-title text-center mt-0 mb-1 text-uppercase">Patient Surgery Information</h6>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover text-nowrap table-responsive-sm table-bordered table-striped table-sm display" id="family_medical_history_table" style="width:100%">
                                            <thead>
                                                <tr>
                                                    <th>Surgery Name</th>
                                                    <th>Surgery Details</th>                                                                         
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for surgery in patient_surgeries %}
                                                <tr>
                                                    <td>{{ surgery.surgery_name }}</td>
                                                    <td>{{ surgery.surgery_date }}</td>                                                                            
                                                </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                                {% endif %}

                                {% if "yes" in behaviors.weekly_exercise_frequency or "yes" in behaviors.alcohol_consumption or "yes" in behaviors.smoking or "yes" in behaviors.healthy_diet or "yes" in behaviors.stress_management or "yes" in behaviors.sufficient_sleep %}
                                <div class="card">
                                    <div class="card-header">
                                        <h6 class="header-title text-center mt-0 mb-1 text-uppercase">Lifestyle Behaviors</h6>
                                    </div>
                                    <div class="card-body">
                                        <ul class="list-group">
                                            {% if behaviors.weekly_exercise_frequency == "yes" %}
                                            <li class="list-group-item">Weekly Exercise Frequency</li>
                                            {% endif %}
                                            {% if behaviors.smoking == "yes" %}
                                            <li class="list-group-item">Smoking</li>
                                            {% endif %}
                                            {% if behaviors.alcohol_consumption == "yes" %}
                                            <li class="list-group-item">Alcohol Consumption</li>
                                            {% endif %}
                                            {% if behaviors.healthy_diet == "yes" %}
                                            <li class="list-group-item">Healthy Diet</li>
                                            {% endif %}
                                            {% if behaviors.stress_management == "yes" %}
                                            <li class="list-group-item">Stress Management</li>
                                            {% endif %}
                                            {% if behaviors.sufficient_sleep == "yes" %}
                                            <li class="list-group-item">Sufficient Sleep</li>
                                            {% endif %}
                                        </ul>
                                    </div>
                                </div>
                                {% endif %}
                        </div>
                    </div>
                </div>                
            </div> 
           
            </div>          
         
        </div>
    </div>

    <script>
    // Fade out alerts after 5 seconds (5000ms)
    setTimeout(function() {
        document.querySelectorAll('.alert-message').forEach(function(el) {
            el.style.transition = 'opacity 0.5s ease-out';
            el.style.opacity = '0';
            setTimeout(() => el.style.display = 'none', 500);
        });
    }, 5000);
</script>


<div class="modal fade" id="abdominalPainModal" tabindex="-1" role="dialog" aria-labelledby="abdominalPainModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content shadow-lg rounded">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title" id="abdominalPainModalLabel">Abdominal Pain Details</h5>
        <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">
        <form id="abdominalPainForm">
          <div class="container-fluid">
            <div class="row g-3">
              <!-- Duration -->
              <div class="col-md-6">
                <label for="abdPainDuration" class="form-label">Duration (days):</label>
                <input type="number" class="form-control" id="abdPainDuration" placeholder="e.g. 4">
              </div>

              <!-- Pain Type -->
              <div class="col-md-6">
                <label for="painType" class="form-label">Pain Type:</label>
                <select class="form-control select2bs4" id="painType"  style="width: 100%;">
                  <option>dull</option>
                  <option>sharp</option>
                  <option>burning</option>
                </select>
              </div>

              <!-- Pain Timing -->
              <div class="col-md-6">
                <label for="painTiming" class="form-label">Pain Timing:</label>
                <select class="form-control select2bs4"  style="width: 100%;" id="painTiming">
                  <option value="none">No specific periodicity</option>
                  <option value="during">More during meals</option>
                  <option value="after">More after meals</option>
                  <option value="empty">More when on empty stomach</option>
                </select>
              </div>

              <!-- Pain Relief -->
              <div class="col-md-6">
                <label for="painRelief" class="form-label">Pain Relief:</label>
                <select class="form-control select2bs4"  style="width: 100%;" id="painRelief">
                  <option value="food">Relieved by food</option>
                  <option value="empty">Relieved on empty stomach</option>
                  <option value="both">Relieved by both food and empty stomach</option>
                  <option value="none">Not relieved</option>
                </select>
              </div>

              <!-- Diarrhoea Type -->
              <div class="col-md-6">
                <label for="diarrhoeaType" class="form-label">Diarrhoea Type:</label>
                <select class="form-control select2bs4"  style="width: 100%;" id="diarrhoeaType">
                  <option value="none">No diarrhoea</option>
                  <option value="mucoid">Mucoid</option>
                  <option value="watery">Watery</option>
                </select>
              </div>

              <!-- Diarrhoea Blood -->
              <div class="col-md-6">
                <label for="diarrhoeaBlood" class="form-label">Diarrhoea Associated with Blood?</label>
                <select class="form-control select2bs4"  style="width: 100%;" id="diarrhoeaBlood">
                  <option value="no">No</option>
                  <option value="yes">Yes</option>
                </select>
              </div>

              <!-- Constipation Associated -->
              <div class="col-md-6">
                <label for="constipationAssociated" class="form-label">Associated with Constipation?</label>
                <select class="form-control select2bs4"  style="width: 100%;" id="constipationAssociated">
                  <option value="yes">Yes</option>
                  <option value="no">No</option>
                </select>
              </div>
            </div>

            <!-- Submit button -->
            <div class="row mt-4">
              <div class="col text-center">
                <button type="button" class="btn btn-success px-5" onclick="generateAbdPain()">Add to HPI</button>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<script>
function generateAbdPain() {
  const days = document.getElementById("abdPainDuration").value;
  const painType = document.getElementById("painType").value;
  const painTiming = document.getElementById("painTiming").value;
  const painRelief = document.getElementById("painRelief").value;
  const diarrhoeaType = document.getElementById("diarrhoeaType").value;
  const diarrhoeaBlood = document.getElementById("diarrhoeaBlood").value;
  const constipation = document.getElementById("constipationAssociated").value;

  let timingText = "";
  if (painTiming === "none") timingText = "has no specific periodicity";
  else if (painTiming === "during") timingText = "is more during meals";
  else if (painTiming === "after") timingText = "is more after meals";
  else if (painTiming === "empty") timingText = "is more when on empty stomach";

  let reliefText = "";
  if (painRelief === "food") reliefText = "The pain is relieved by intake of food.";
  else if (painRelief === "empty") reliefText = "The pain is relieved when on an empty stomach.";
  else if (painRelief === "both") reliefText = "The pain is relieved by both food intake and when on empty stomach.";
  else reliefText = "The pain is not relieved by either food or posture.";

  let diarrhoeaText = "";
  if (diarrhoeaType === "none") {
    diarrhoeaText = "There is no history of diarrhoea.";
  } else {
    const bloodText = diarrhoeaBlood === "yes" ? "and is associated with blood" : "and is not associated with blood";
    diarrhoeaText = `There is also history of diarrhoea that is nonspecific in periodicity and is ${diarrhoeaType} in nature ${bloodText}.`;
  }

  const constipationText = constipation === "yes"
    ? "The abdominal pain is associated with constipation."
    : "The abdominal pain is not associated with constipation.";

  const sentence = `The patient has had abdominal pain that has been there for ${days} days, and this has been more generalised and non-radiating. The pain is described as ${painType} in nature and ${timingText}. ${reliefText} ${diarrhoeaText} ${constipationText}`;

  appendToHPI(sentence);
  $('#abdominalPainModal').modal('hide');
}

function appendToHPI(text) {
  const hpiField = document.getElementById("hpi");
  hpiField.value += (hpiField.value ? "\n" : "") + text;
}
</script>

<div class="modal fade" id="lowerAbdPainModal" tabindex="-1" role="dialog" aria-labelledby="lowerAbdPainModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content shadow-lg rounded">
      <div class="modal-header bg-secondary text-white">
        <h5 class="modal-title" id="lowerAbdPainModalLabel">Lower Abdominal Pain Details</h5>
        <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">
        <form id="lowerAbdPainForm">
          <div class="container-fluid">
            <div class="row g-3">
              <!-- Duration -->
              <div class="col-md-6">
                <label for="lowerAbdDuration" class="form-label">Duration (days):</label>
                <input type="number" class="form-control" id="lowerAbdDuration" placeholder="e.g. 3">
              </div>

              <!-- Discharge -->
              <div class="col-md-6">
                <label for="dischargePresence" class="form-label">Discharge Present?</label>
                <select  class="form-control select2bs4"  style="width: 100%;"  id="dischargePresence">
                  <option value="yes">Yes</option>
                  <option value="no">No</option>
                </select>
              </div>

              <!-- Foul Smell -->
              <div class="col-md-6">
                <label for="foulSmell" class="form-label">Foul Smell Present?</label>
                <select class="form-control select2bs4"  style="width: 100%;" id="foulSmell">
                  <option value="yes">Yes</option>
                  <option value="no">No</option>
                </select>
              </div>

              <!-- Pessary -->
              <div class="col-md-6">
                <label for="pessaryUsed" class="form-label">Vaginal Pessary Used?</label>
                <select class="form-control select2bs4"  style="width: 100%;" id="pessaryUsed">
                  <option value="yes">Yes</option>
                  <option value="no">No</option>
                </select>
              </div>

              <!-- Cream -->
              <div class="col-md-6">
                <label for="creamUsed" class="form-label">Vaginal Cream Used?</label>
                <select class="form-control select2bs4"  style="width: 100%;" id="creamUsed">
                  <option value="yes">Yes</option>
                  <option value="no">No</option>
                </select>
              </div>

              <!-- Improvement -->
              <div class="col-md-6">
                <label for="improvement" class="form-label">Improvement Observed?</label>
                <select class="form-control select2bs4"  style="width: 100%;" id="improvement">
                  <option value="yes">Yes</option>
                  <option value="no">No</option>
                </select>
              </div>
            </div>

            <!-- Submit button -->
            <div class="row mt-4">
              <div class="col text-center">
                <button type="button" class="btn btn-success px-5" onclick="generateLowerAbdPain()">Add to HPI</button>
              </div>
            </div>
          </div>
        </form>
      </div>

    </div>
  </div>
</div>


<script>
  function generateLowerAbdPain() {
  const days = document.getElementById("lowerAbdDuration").value;
  const discharge = document.getElementById("dischargePresence").value;
  const smell = document.getElementById("foulSmell").value;
  const pessary = document.getElementById("pessaryUsed").value;
  const cream = document.getElementById("creamUsed").value;
  const improvement = document.getElementById("improvement").value;

  let dischargeText = discharge === "yes"
    ? "She has also been experiencing discharge"
    : "She has not been experiencing discharge";

  let smellText = smell === "yes"
    ? "this has resulted in foul smell"
    : "there is no foul smell";

  let pessaryText = pessary === "yes"
    ? "She has used vaginal pessary"
    : "She has not used vaginal pessary";

  let creamText = cream === "yes"
    ? "and has also used vaginal cream"
    : "and has not used vaginal cream";

  let improvementText = improvement === "yes"
    ? "that has resulted in improvement."
    : "that has not resulted in improvement.";

  const sentence = `She has been experiencing lower abdominal pain that has been there for the past ${days} days, and this has resulted in pain at all times when moving and when not moving. ${dischargeText} and ${smellText}. ${pessaryText} ${creamText} ${improvementText}`;

  appendToHPI(sentence);
  $('#lowerAbdPainModal').modal('hide');
}

function appendToHPI(text) {
  const hpiField = document.getElementById("hpi");
  hpiField.value += (hpiField.value ? "\n" : "") + text;
}

</script>

<div class="modal fade" id="constipationModal" tabindex="-1" role="dialog" aria-labelledby="constipationModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-md" role="document">
    <div class="modal-content shadow rounded">
      <div class="modal-header bg-dark text-white">
        <h5 class="modal-title" id="constipationModalLabel">Constipation Details</h5>
        <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">
        <form id="constipationForm">
          <div class="container-fluid">
            <div class="row g-3">

              <!-- Duration -->
              <div class="col-md-12">
                <label for="constipationDuration" class="form-label">Duration (days):</label>
                <input type="number" class="form-control" id="constipationDuration" placeholder="e.g. 2">
              </div>

              <!-- Stool Consistency -->
              <div class="col-md-12">
                <label for="constipationStool" class="form-label">Stool Consistency:</label>
                <select class="form-control select2bs4"  style="width: 100%;" id="constipationStool">
                  <option value="very hard">Very Hard</option>
                  <option value="hard">Hard</option>
                  <option value="lumpy">Lumpy</option>
                </select>
              </div>

              <!-- History of Abdominal Pain -->
              <div class="col-md-12">
                <label for="constipationAbdominalPain" class="form-label">History of Abdominal Pain?</label>
                <select class="form-control select2bs4"  style="width: 100%;" id="constipationAbdominalPain">
                  <option value="no">No</option>
                  <option value="yes">Yes</option>
                </select>
              </div>

            </div>

            <!-- Submit Button -->
            <div class="row mt-4">
              <div class="col text-center">
                <button type="button" class="btn btn-success px-4" onclick="generateConstipation()">Add to HPI</button>
              </div>
            </div>

          </div>
        </form>
      </div>

    </div>
  </div>
</div>

<script>
  function generateConstipation() {
  const days = document.getElementById("constipationDuration").value;
  const stool = document.getElementById("constipationStool").value;
  const pain = document.getElementById("constipationAbdominalPain").value;

  let painText = pain === "yes" 
    ? "There is a history of abdominal pain." 
    : "There is no history of abdominal pain.";

  const sentence = `Patient has had constipation that has been there for the past ${days} days, and this is associated with ${stool} stool. ${painText}`;

  appendToHPI(sentence);
  $('#constipationModal').modal('hide');
}

function appendToHPI(text) {
  const hpiField = document.getElementById("hpi");
  hpiField.value += (hpiField.value ? "\n" : "") + text;
}

</script>
<div class="modal fade" id="pvDischargeModal" tabindex="-1" role="dialog" aria-labelledby="pvDischargeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content shadow-lg rounded">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title" id="pvDischargeModalLabel">PV Discharge Details</h5>
        <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">
        <form id="pvDischargeForm">
          <div class="container-fluid">
            <div class="row g-3">

              <!-- Duration -->
              <div class="col-md-6">
                <label for="pvDuration" class="form-label">Duration (days):</label>
                <input type="number" class="form-control" id="pvDuration" placeholder="e.g. 5">
              </div>

              <!-- Nature of Discharge -->
              <div class="col-md-6">
                <label for="pvNature" class="form-label">Nature of Discharge:</label>
                <select class="form-control select2bs4"  style="width: 100%;" id="pvNature">
                  <option>Whitish</option>
                  <option>Yellowish</option>
                  <option>Greenish</option>
                </select>
              </div>

              <!-- Itching Duration -->
              <div class="col-md-6">
                <label for="pvItchingDuration" class="form-label">Itching Duration (days):</label>
                <input type="number" class="form-control" id="pvItchingDuration" placeholder="e.g. 2">
              </div>

              <!-- Associated with LAP -->
              <div class="col-md-6">
                <label for="pvLap" class="form-label">Associated with LAP:</label>
                <select class="form-control select2bs4"  style="width: 100%;" id="pvLap">
                  <option value="yes">Yes</option>
                  <option value="no">No</option>
                </select>
              </div>

              <!-- Medication Used -->
              <div class="col-md-6">
                <label for="pvMedUsed" class="form-label">Topical Medication Used:</label>
                <select class="form-control select2bs4"  style="width: 100%;" id="pvMedUsed">
                  <option value="yes">Yes</option>
                  <option value="no">No</option>
                </select>
              </div>

            </div>

            <!-- Submit Button -->
            <div class="row mt-4">
              <div class="col text-center">
                <button type="button" class="btn btn-success px-4" onclick="generatePVDischarge()">Generate</button>
              </div>
            </div>
          </div>
        </form>
      </div>

    </div>
  </div>
</div>


<script>
function generatePVDischarge() {
  const duration = document.getElementById("pvDuration").value;
  const nature = document.getElementById("pvNature").value;
  const itchingDays = document.getElementById("pvItchingDuration").value;
  const lap = document.getElementById("pvLap").value;
  const meds = document.getElementById("pvMedUsed").value;

  const lapText = lap === "yes" ? "associated with LAP" : "not associated with LAP";
  const medText = meds === "yes" ? "has been on topical medication" : "has not been on topical medication";

  const sentence = `She has been experiencing PV discharge that has been there for the past ${duration} days. The PV discharge is ${nature.toLowerCase()} in nature and also associated with PV itching for ${itchingDays} days. The PV itching is ${lapText} and not associated with severe scratching. She ${medText}, and has had no relief since the start of symptoms.`;

  appendToHPI(sentence);
  $('#pvDischargeModal').modal('hide');
}

</script>

<!-- Painful Micturition Modal -->
<div class="modal fade" id="painfulMicturitionModal" tabindex="-1" role="dialog" aria-labelledby="painfulMicturitionModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-md" role="document">
    <div class="modal-content shadow-lg rounded">
      
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title" id="painfulMicturitionModalLabel">Painful Micturition - HPI Builder</h5>
        <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">
        <form id="painfulMicturitionForm">
          <div class="container-fluid">
            <div class="row g-3">

              <!-- Duration -->
              <div class="col-md-12">
                <label for="micturitionDays" class="form-label">Duration (in days):</label>
                <input type="number" id="micturitionDays" class="form-control" min="1" placeholder="e.g., 3">
              </div>

              <!-- Blood in urine -->
              <div class="col-md-12">
                <label for="micturitionBlood" class="form-label">Presence of blood in urine:</label>
                <select id="micturitionBlood" class="form-control select2bs4"  style="width: 100%;" >
                  <option value="no history of blood in urine">No</option>
                  <option value="a history of blood in urine">Yes</option>
                </select>
              </div>

              <!-- Pus in urine -->
              <div class="col-md-12">
                <label for="micturitionPus" class="form-label">Presence of pus in urine:</label>
                <select id="micturitionPus" class="form-control select2bs4"  style="width: 100%;" >
                  <option value="no history of pus in urine">No</option>
                  <option value="a history of pus in urine">Yes</option>
                </select>
              </div>

              <!-- Fever -->
              <div class="col-md-12">
                <label for="micturitionFever" class="form-label">Fever associated?</label>
                <select id="micturitionFever" class="form-control select2bs4"  style="width: 100%;" >
                  <option value="no history of fever associated with the painful micturition">No</option>
                  <option value="a history of fever associated with the painful micturition">Yes</option>
                </select>
              </div>

            </div>
          </div>
        </form>
      </div>

      <div class="modal-footer justify-content-between">
        <button class="btn btn-danger px-4" onclick="generateMicturitionHPI()">Generate & Insert</button>
        <button class="btn btn-secondary" data-dismiss="modal">Cancel</button>
      </div>

    </div>
  </div>
</div>


<script>
  function generateMicturitionHPI() {
    const days = document.getElementById('micturitionDays').value.trim();
    const blood = document.getElementById('micturitionBlood').value;
    const pus = document.getElementById('micturitionPus').value;
    const fever = document.getElementById('micturitionFever').value;

    let sentence = `The patient has been experiencing painful micturition that has been there over the past ${days} day(s), and this is mostly when passing urine, and not relieved by posture. There is ${blood} and also ${pus}. The patient has ${fever}.`;

    const hpiTextarea = document.getElementById('hpi');
    hpiTextarea.value = hpiTextarea.value.trim()
      ? `${hpiTextarea.value.trim()}\n\n${sentence}`
      : sentence;

    $('#painfulMicturitionModal').modal('hide');
  }
</script>


<!-- Joint Pain Modal -->
<div class="modal fade" id="jointPainModal" tabindex="-1" role="dialog" aria-labelledby="jointPainModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content shadow rounded-3 border-0">
      
      <div class="modal-header bg-info text-white">
        <h5 class="modal-title" id="jointPainModalLabel">Joint Pain - HPI Builder</h5>
        <button type="button" class="btn-close btn-close-white" data-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body">
        <form id="jointPainForm">
          <div class="container-fluid">
            <div class="row g-3">

              <!-- Onset -->
              <div class="col-md-4">
                <label for="jointPainOnset" class="form-label">Onset</label>
                <select id="jointPainOnset" class="form-control select2bs4"  style="width: 100%;" >
                  <option value="suddenly">Suddenly</option>
                  <option value="gradually">Gradually</option>
                </select>
              </div>

              <!-- Distribution -->
              <div class="col-md-4">
                <label for="jointPainDistribution" class="form-label">Distribution</label>
                <select id="jointPainDistribution" class="form-control select2bs4"  style="width: 100%;"  onchange="toggleJointLocationInput()">
                  <option value="generalized">Generalized</option>
                  <option value="localized">Localized</option>
                </select>
              </div>

              <!-- Location -->
              <div class="col-md-4" id="jointPainLocationGroup" style="display: none;">
                <label for="jointPainLocation" class="form-label">Location</label>
                <input type="text" id="jointPainLocation" class="form-control" placeholder="e.g., knees, elbows">
              </div>

              <!-- Associated with movement -->
              <div class="col-md-4">
                <label for="jointPainMovement" class="form-label">Associated with movement?</label>
                <select id="jointPainMovement" class="form-control select2bs4"  style="width: 100%;" >
                  <option value="is associated with movement">Yes</option>
                  <option value="is not associated with movement">No</option>
                </select>
              </div>

              <!-- Relieved by rest -->
              <div class="col-md-4">
                <label for="jointPainRelief" class="form-label">Relieved by rest?</label>
                <select id="jointPainRelief" class="form-control select2bs4"  style="width: 100%;" >
                  <option value="is relieved with resting posture">Yes</option>
                  <option value="is not relieved with resting posture">No</option>
                </select>
              </div>

              <!-- Medication taken -->
              <div class="col-md-4">
                <label for="jointPainMedication" class="form-label">Medication taken?</label>
                <select id="jointPainMedication" class="form-control select2bs4"  style="width: 100%;" >
                  <option value="no history of taking medication">No</option>
                  <option value="history of taking medication">Yes</option>
                </select>
              </div>

              <!-- Topical medication result -->
              <div class="col-md-4">
                <label for="jointPainTopical" class="form-label">Topical medication result</label>
                <select id="jointPainTopical" class="form-control select2bs4"  style="width: 100%;" >
                  <option value="not successful with application of topical medications">Not successful</option>
                  <option value="some relief with application of topical medications">Some relief</option>
                </select>
              </div>

            </div>
          </div>
        </form>
      </div>

      <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-info px-4" onclick="generateJointPainHPI()">Generate & Insert</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
      </div>

    </div>
  </div>
</div>

<script>
  function toggleJointLocationInput() {
    const dist = document.getElementById("jointPainDistribution").value;
    const locGroup = document.getElementById("jointPainLocationGroup");
    locGroup.style.display = dist === "localized" ? "block" : "none";
  }
</script>



<script>
  document.getElementById('jointPainDistribution').addEventListener('change', function () {
    document.getElementById('jointPainLocationGroup').style.display = this.value === 'localized' ? 'block' : 'none';
  });

  function generateJointPainHPI() {
    const onset = document.getElementById('jointPainOnset').value;
    const distribution = document.getElementById('jointPainDistribution').value;
    const location = document.getElementById('jointPainLocation').value.trim();
    const movement = document.getElementById('jointPainMovement').value;
    const relief = document.getElementById('jointPainRelief').value;
    const medication = document.getElementById('jointPainMedication').value;
    const topical = document.getElementById('jointPainTopical').value;

    let sentence = `The patient has joint pain that started ${onset} and is more ${distribution}`;
    if (distribution === 'localized' && location) {
      sentence += ` at the ${location}`;
    }
    sentence += `. The pain ${movement}, and ${relief}. There is ${medication} to relieve the pain, and this has been ${topical}.`;

    const hpiTextarea = document.getElementById('hpi');
    hpiTextarea.value = hpiTextarea.value.trim()
      ? `${hpiTextarea.value.trim()}\n\n${sentence}`
      : sentence;

    $('#jointPainModal').modal('hide');
  }
</script>

<!-- Back Pain Modal -->
<div class="modal fade" id="backPainModal" tabindex="-1" role="dialog" aria-labelledby="backPainModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content shadow rounded border-0">

      <div class="modal-header bg-warning text-dark">
        <h5 class="modal-title" id="backPainModalLabel">Back Pain - HPI Builder</h5>
        <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body">
        <form id="backPainForm">
          <div class="container-fluid">
            <div class="row g-3">

              <!-- Onset -->
              <div class="col-md-4">
                <label for="backPainOnset" class="form-label">Onset</label>
                <select id="backPainOnset" class="form-control select2bs4" style="width: 100%;">
                  <option value="suddenly">Suddenly</option>
                  <option value="gradually">Gradually</option>
                </select>
              </div>

              <!-- Distribution -->
              <div class="col-md-4">
                <label for="backPainDistribution" class="form-label">Distribution</label>
                <select id="backPainDistribution" class="form-control select2bs4" style="width: 100%;" onchange="toggleBackLocationInput()">
                  <option value="generalized">Generalized</option>
                  <option value="localized">Localized</option>
                </select>
              </div>

              <!-- Location (conditional) -->
              <div class="col-md-4" id="backPainLocationGroup" style="display: none;">
                <label for="backPainLocation" class="form-label">Location (if localized)</label>
                <input type="text" id="backPainLocation" class="form-control" placeholder="e.g., lower back, lumbar region" />
              </div>

              <!-- Associated with movement -->
              <div class="col-md-4">
                <label for="backPainMovement" class="form-label">Associated with movement?</label>
                <select id="backPainMovement" class="form-control select2bs4" style="width: 100%;">
                  <option value="is associated with movement">Yes</option>
                  <option value="is not associated with movement">No</option>
                </select>
              </div>

              <!-- Relieved by rest -->
              <div class="col-md-4">
                <label for="backPainRelief" class="form-label">Relieved by rest?</label>
                <select id="backPainRelief" class="form-control select2bs4" style="width: 100%;">
                  <option value="is relieved with resting posture">Yes</option>
                  <option value="is not relieved with resting posture">No</option>
                </select>
              </div>

              <!-- Medication taken -->
              <div class="col-md-4">
                <label for="backPainMedication" class="form-label">Medication taken?</label>
                <select id="backPainMedication" class="form-control select2bs4" style="width: 100%;">
                  <option value="no history of taking medication">No</option>
                  <option value="history of taking medication">Yes</option>
                </select>
              </div>

              <!-- Topical medication result -->
              <div class="col-md-4">
                <label for="backPainTopical" class="form-label">Topical medication result</label>
                <select id="backPainTopical" class="form-control select2bs4" style="width: 100%;">
                  <option value="not successful with application of topical medications">Not successful</option>
                  <option value="some relief with application of topical medications">Some relief</option>
                </select>
              </div>

            </div>
          </div>
        </form>
      </div>

      <div class="modal-footer justify-content-between">
        <button type="button" class="btn btn-warning px-4" onclick="generateBackPainHPI()">Generate & Insert</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
      </div>

    </div>
  </div>
</div>

<script>
  function toggleBackLocationInput() {
    const dist = document.getElementById("backPainDistribution").value;
    const locGroup = document.getElementById("backPainLocationGroup");
    locGroup.style.display = dist === "localized" ? "block" : "none";
  }
</script>

<script>
  document.getElementById('backPainDistribution').addEventListener('change', function () {
    document.getElementById('backPainLocationGroup').style.display = this.value === 'localized' ? 'block' : 'none';
  });

  function generateBackPainHPI() {
    const onset = document.getElementById('backPainOnset').value;
    const distribution = document.getElementById('backPainDistribution').value;
    const location = document.getElementById('backPainLocation').value.trim();
    const movement = document.getElementById('backPainMovement').value;
    const relief = document.getElementById('backPainRelief').value;
    const medication = document.getElementById('backPainMedication').value;
    const topical = document.getElementById('backPainTopical').value;

    let sentence = `The patient has back pain that started ${onset} and is more ${distribution}`;
    if (distribution === 'localized' && location) {
      sentence += ` at the ${location}`;
    }
    sentence += `. The back pain ${movement}, and ${relief}. There is ${medication} to relieve the pain, and this has been ${topical}.`;

    const hpiTextarea = document.getElementById('hpi');
    hpiTextarea.value = hpiTextarea.value.trim()
      ? `${hpiTextarea.value.trim()}\n\n${sentence}`
      : sentence;

    $('#backPainModal').modal('hide');
  }
</script>

<!-- Rashes Modal -->
<div class="modal fade" id="rashesModal" tabindex="-1" role="dialog" aria-labelledby="rashesModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content shadow rounded border-0">

      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title" id="rashesModalLabel">Rashes - HPI Builder</h5>
        <button type="button" class="close btn-close-white" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">
        <form id="rashesForm">
          <div class="container-fluid">
            <div class="row g-3">

              <!-- Duration -->
              <div class="col-md-4">
                <label for="rashesDuration" class="form-label">Duration</label>
                <input type="text" id="rashesDuration" class="form-control" placeholder="e.g., 3 days, one week" />
              </div>

              <!-- Itching -->
              <div class="col-md-4">
                <label for="rashesItching" class="form-label">Itching</label>
                <select id="rashesItching" class="form-control select2bs4" style="width: 100%;">
                  <option value="has itching">Has itching</option>
                  <option value="no itching">No itching</option>
                </select>
              </div>

              <!-- Distribution -->
              <div class="col-md-4">
                <label for="rashesDistribution" class="form-label">Distribution</label>
                <select id="rashesDistribution" class="form-control select2bs4" style="width: 100%;" onchange="toggleRashLocationInput()">
                  <option value="more generalized">More generalized</option>
                  <option value="localized">Localized</option>
                </select>
              </div>

              <!-- Location (if localized) -->
              <div class="col-md-4" id="rashesLocationGroup" style="display: none;">
                <label for="rashesLocation" class="form-label">Location (if localized)</label>
                <input type="text" id="rashesLocation" class="form-control" placeholder="e.g., arms, legs, face" />
              </div>

              <!-- Medication History -->
              <div class="col-md-4">
                <label for="rashesMedication" class="form-label">Medication History</label>
                <select id="rashesMedication" class="form-control select2bs4" style="width: 100%;">
                  <option value="has been">Has been</option>
                  <option value="has not been">Has not been</option>
                </select>
              </div>

            </div>

            <!-- Buttons Row -->
            <div class="row mt-4">
              <div class="col text-center">
                <button type="button" class="btn btn-danger px-4" onclick="generateRashesHPI()">Generate & Insert</button>
              </div>
            </div>

          </div>
        </form>
      </div>

    </div>
  </div>
</div>


<script>
  function toggleRashLocationInput() {
    const dist = document.getElementById("rashesDistribution").value;
    const locGroup = document.getElementById("rashesLocationGroup");
    locGroup.style.display = dist === "localized" ? "block" : "none";
  }
</script>


<script>
  document.getElementById('rashesDistribution').addEventListener('change', function () {
    const locGroup = document.getElementById('rashesLocationGroup');
    locGroup.style.display = this.value === 'localized' ? 'block' : 'none';
  });

  function generateRashesHPI() {
    const duration = document.getElementById('rashesDuration').value.trim();
    const itching = document.getElementById('rashesItching').value;
    const distribution = document.getElementById('rashesDistribution').value;
    const location = document.getElementById('rashesLocation').value.trim();
    const medication = document.getElementById('rashesMedication').value;

    let sentence = `The patient has been having rashes that have been there for the past ${duration}, and this has resulted in discomfort. `;
    sentence += `The rashes ${itching} that has accompanied the rashes, and these are ${distribution}`;
    if (distribution === 'localized' && location) {
      sentence += ` in ${location}`;
    }
    sentence += `. The patient ${medication} on any medication lately and this has resulted in no improvement to the condition.`;

    const hpiTextarea = document.getElementById('hpi');
    hpiTextarea.value = hpiTextarea.value.trim()
      ? `${hpiTextarea.value.trim()}\n\n${sentence}`
      : sentence;

    $('#rashesModal').modal('hide');
  }
</script>


<!-- Generalized Malaise Modal -->
<div class="modal fade" id="gbmModal" tabindex="-1" role="dialog" aria-labelledby="gbmModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content shadow rounded">

      <div class="modal-header bg-warning text-dark">
        <h5 class="modal-title" id="gbmModalLabel">Generalized Malaise - HPI Builder</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">
        <form id="gbmForm">
          <div class="container-fluid">
            <div class="row g-3">

              <!-- Onset -->
              <div class="col-md-4">
                <label for="gbmOnset" class="form-label">Onset</label>
                <select class="form-control select2bs4" style="width: 100%;" id="gbmOnset">
                  <option value="started gradually">Gradual</option>
                  <option value="started suddenly">Sudden</option>
                </select>
              </div>

              <!-- Associated Factors -->
              <div class="col-md-4">
                <label for="gbmAssociatedFactors" class="form-label">Associated Factors</label>
                <input type="text" class="form-control" id="gbmAssociatedFactors" placeholder="e.g., fever, weakness">
              </div>

              <!-- Relation to Rest/Work -->
              <div class="col-md-4">
                <label for="gbmRelation" class="form-label">Relation to Rest/Work</label>
                <select class="form-control select2bs4" style="width: 100%;" id="gbmRelation">
                  <option value="mostly not related to the resting situation and also not related to work activities">
                    Not related to rest or work
                  </option>
                  <option value="worsens with rest and improves with activity">Worsens with rest</option>
                  <option value="worsens with work and improves with rest">Worsens with work</option>
                </select>
              </div>

            </div>

            <!-- Buttons Row -->
            <div class="row mt-4">
              <div class="col text-center">
                <button type="button" class="btn btn-warning px-4" onclick="generateGBMHPI()">Generate & Insert</button>
              </div>
            </div>

          </div>
        </form>
      </div>

    </div>
  </div>
</div>


<script>
  function generateGBMHPI() {
    const onset = document.getElementById('gbmOnset').value;
    const relation = document.getElementById('gbmRelation').value;
    const associated = document.getElementById('gbmAssociatedFactors').value.trim();

    let sentence = `Patient has been having generalized malaise that ${onset} and has been ${relation}.`;
    if (associated) {
      sentence += ` The GBM has been associated with ${associated}.`;
    }

    const hpiTextarea = document.getElementById('hpi');
    hpiTextarea.value = hpiTextarea.value.trim()
      ? `${hpiTextarea.value.trim()}\n\n${sentence}`
      : sentence;

    $('#gbmModal').modal('hide');
  }
</script>


<!-- Gaseous Discomfort Modal -->
<div class="modal fade" id="gaseousDiscomfortModal" tabindex="-1" role="dialog" aria-labelledby="gaseousDiscomfortModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content shadow-lg rounded">

      <div class="modal-header bg-success text-white">
        <h5 class="modal-title" id="gaseousDiscomfortModalLabel">Gaseous Discomfort - HPI Builder</h5>
        <button type="button" class="close btn-close-white" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">
        <form id="gaseousDiscomfortForm">
          <div class="container-fluid">
            <div class="row g-3">

              <!-- Duration -->
              <div class="col-md-4">
                <label for="gaseousDiscomfortDays" class="form-label">Duration (days)</label>
                <input type="number" class="form-control" id="gaseousDiscomfortDays" min="0" placeholder="Enter number of days">
              </div>

              <!-- Medication Taken -->
              <div class="col-md-4">
                <label for="gaseousDiscomfortMedication" class="form-label">Medication Taken</label>
                <select class="form-control select2bs4" style="width: 100%;" id="gaseousDiscomfortMedication">
                  <option value="has not been on medication to relieve the current discomfort">No</option>
                  <option value="has been on medication to relieve the current discomfort">Yes</option>
                </select>
              </div>

              <!-- Blood in Stool -->
              <div class="col-md-4">
                <label for="gaseousDiscomfortBloodStool" class="form-label">Blood in Stool</label>
                <select class="form-control select2bs4" style="width: 100%;" id="gaseousDiscomfortBloodStool">
                  <option value="There is no history of blood in stool">No</option>
                  <option value="There is history of blood in stool">Yes</option>
                </select>
              </div>

              <!-- Diarrhea -->
              <div class="col-md-4">
                <label for="gaseousDiscomfortDiarrhea" class="form-label">Diarrhea</label>
                <select class="form-control select2bs4" style="width: 100%;" id="gaseousDiscomfortDiarrhea">
                  <option value="there is no history of diarrhea">No</option>
                  <option value="there is history of diarrhea">Yes</option>
                </select>
              </div>

            </div>

            <!-- Button Row -->
            <div class="row mt-4">
              <div class="col text-center">
                <button type="button" class="btn btn-success px-4" onclick="generateGaseousDiscomfortHPI()">Generate & Insert</button>
              </div>
            </div>

          </div>
        </form>
      </div>

    </div>
  </div>
</div>


    
<script>
  function generateGaseousDiscomfortHPI() {
    const days = document.getElementById('gaseousDiscomfortDays').value || 'several';
    const medication = document.getElementById('gaseousDiscomfortMedication').value;
    const bloodStool = document.getElementById('gaseousDiscomfortBloodStool').value;
    const diarrhea = document.getElementById('gaseousDiscomfortDiarrhea').value;

    const sentence = `Patient has been experiencing gaseous discomfort that started ${days} days ago and this has resulted in severe inability to consume enough food and also associated with inability to have a comfortable daily routine. The patient ${medication}. ${bloodStool}, and also ${diarrhea}.`;

    const hpiTextarea = document.getElementById('hpi');
    hpiTextarea.value = hpiTextarea.value.trim()
      ? `${hpiTextarea.value.trim()}\n\n${sentence}`
      : sentence;

    $('#gaseousDiscomfortModal').modal('hide');
  }
</script>


<!-- Chest Pain Modal -->
<div class="modal fade" id="chestPainModal" tabindex="-1" role="dialog" aria-labelledby="chestPainModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content shadow-lg rounded">

      <div class="modal-header bg-warning text-dark">
        <h5 class="modal-title" id="chestPainModalLabel">Chest Pain - HPI Builder</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">
        <form id="chestPainForm">
          <div class="container-fluid">
            <div class="row g-3">

              <!-- Duration -->
              <div class="col-md-4">
                <label for="chestPainDaysAgo" class="form-label">Duration (days)</label>
                <input type="number" class="form-control" id="chestPainDaysAgo" min="0" placeholder="Enter number of days">
              </div>

              <!-- Location -->
              <div class="col-md-4">
                <label for="chestPainLocation" class="form-label">Location</label>
                <select class="form-control select2bs4" style="width: 100%;" id="chestPainLocation">
                  <option value="central">Central</option>
                  <option value="generalized">Generalized</option>
                </select>
              </div>

              <!-- Radiation -->
              <div class="col-md-4">
                <label for="chestPainRadiation" class="form-label">Radiation</label>
                <select class="form-control select2bs4" style="width: 100%;" id="chestPainRadiation">
                  <option value="non-radiating">Non-radiating</option>
                  <option value="radiating">Radiating</option>
                </select>
              </div>

              <!-- Cough Association -->
              <div class="col-md-4">
                <label for="chestPainCough" class="form-label">Associated with Cough?</label>
                <select class="form-control select2bs4" style="width: 100%;" id="chestPainCough">
                  <option value="not associated with cough">No</option>
                  <option value="associated with cough">Yes</option>
                </select>
              </div>

              <!-- Fever Association -->
              <div class="col-md-4">
                <label for="chestPainFever" class="form-label">Associated with Fever?</label>
                <select class="form-control select2bs4" style="width: 100%;" id="chestPainFever">
                  <option value="not associated with fever">No</option>
                  <option value="associated with fever">Yes</option>
                </select>
              </div>

            </div>

            <!-- Button Row -->
            <div class="row mt-4">
              <div class="col text-center">
                <button type="button" class="btn btn-warning px-4" onclick="generateChestPainHPI()">Generate & Insert</button>
              </div>
            </div>

          </div>
        </form>
      </div>

    </div>
  </div>
</div>



<script>
  function generateChestPainHPI() {
    const days = document.getElementById('chestPainDaysAgo').value || 'a few';
    const location = document.getElementById('chestPainLocation').value;
    const radiation = document.getElementById('chestPainRadiation').value;
    const cough = document.getElementById('chestPainCough').value;
    const fever = document.getElementById('chestPainFever').value;

    const sentence = `Patient has chest pain that has been there for ${days} days and is mostly ${location} and is ${radiation} pain. Chest pain is ${cough}, and is ${fever}.`;

    const hpiTextarea = document.getElementById('hpi');
    hpiTextarea.value = hpiTextarea.value.trim()
      ? `${hpiTextarea.value.trim()}\n\n${sentence}`
      : sentence;

    $('#chestPainModal').modal('hide');
  }
</script>


<!-- Difficulty in Breathing Modal -->
<div class="modal fade" id="dibModal" tabindex="-1" role="dialog" aria-labelledby="dibModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content shadow-lg rounded">

      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title" id="dibModalLabel">Difficulty in Breathing - HPI Builder</h5>
        <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">
        <form id="dibForm">
          <div class="container-fluid">
            <div class="row g-3">

              <!-- Duration -->
              <div class="col-md-4">
                <label for="dibDaysAgo" class="form-label">Duration (days)</label>
                <input type="number" class="form-control" id="dibDaysAgo" min="0" placeholder="Enter number of days">
              </div>

              <!-- Location -->
              <div class="col-md-4">
                <label for="dibLocation" class="form-label">Location</label>
                <select class="form-control select2bs4" style="width: 100%;" id="dibLocation">
                  <option value="central">Central</option>
                  <option value="generalized">Generalized</option>
                </select>
              </div>

              <!-- Radiation -->
              <div class="col-md-4">
                <label for="dibRadiation" class="form-label">Radiation</label>
                <select class="form-control select2bs4" style="width: 100%;" id="dibRadiation">
                  <option value="non-radiating">Non-radiating</option>
                  <option value="radiating">Radiating</option>
                </select>
              </div>

              <!-- Cough Association -->
              <div class="col-md-4">
                <label for="dibCough" class="form-label">Associated with Cough?</label>
                <select class="form-control select2bs4" style="width: 100%;" id="dibCough">
                  <option value="not associated with cough">No</option>
                  <option value="associated with cough">Yes</option>
                </select>
              </div>

              <!-- Fever Association -->
              <div class="col-md-4">
                <label for="dibFever" class="form-label">Associated with Fever?</label>
                <select class="form-control select2bs4" style="width: 100%;" id="dibFever">
                  <option value="not associated with fever">No</option>
                  <option value="associated with fever">Yes</option>
                </select>
              </div>

            </div>

            <!-- Button Row -->
            <div class="row mt-4">
              <div class="col text-center">
                <button type="button" class="btn btn-danger px-4" onclick="generateDibHPI()">Generate & Insert</button>
              </div>
            </div>

          </div>
        </form>
      </div>

    </div>
  </div>
</div>


<script>
  function generateDibHPI() {
    const days = document.getElementById('dibDaysAgo').value || 'a few';
    const location = document.getElementById('dibLocation').value;
    const radiation = document.getElementById('dibRadiation').value;
    const cough = document.getElementById('dibCough').value;
    const fever = document.getElementById('dibFever').value;

    const sentence = `Patient has difficulty in breathing that has been there for ${days} days and is mostly ${location} and is ${radiation} pain. DIB is ${cough}, and is ${fever}.`;

    const hpiTextarea = document.getElementById('hpi');
    hpiTextarea.value = hpiTextarea.value.trim()
      ? `${hpiTextarea.value.trim()}\n\n${sentence}`
      : sentence;

    $('#dibModal').modal('hide');
  }
</script>



<!-- Cough Modal -->
<div class="modal fade" id="coughModal" tabindex="-1" role="dialog" aria-labelledby="coughModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content shadow-lg rounded">

      <div class="modal-header bg-warning text-dark">
        <h5 class="modal-title" id="coughModalLabel">Cough - HPI Builder</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">
        <form id="coughForm">
          <div class="container-fluid">
            <div class="row g-3">

              <!-- Cough Start Days Ago -->
              <div class="col-md-4">
                <label for="coughDaysAgo" class="form-label">When did the cough start? (days ago)</label>
                <input type="number" class="form-control" id="coughDaysAgo" min="0" placeholder="e.g. 3">
              </div>

              <!-- Periodicity -->
              <div class="col-md-4">
                <label for="coughPeriodicity" class="form-label">Periodicity of Cough</label>
                <select class="form-control select2bs4" style="width: 100%;" id="coughPeriodicity">
                  <option value="non-specific">Non-specific</option>
                  <option value="mostly at day">Mostly at day</option>
                  <option value="mostly at night">Mostly at night</option>
                </select>
              </div>

              <!-- Sputum Nature -->
              <div class="col-md-4">
                <label for="coughSputum" class="form-label">Nature of Sputum</label>
                <select class="form-control select2bs4" style="width: 100%;" id="coughSputum">
                  <option value="non-productive">Non-productive</option>
                  <option value="productive with yellow sputum">Productive with yellow sputum</option>
                </select>
              </div>

              <!-- Blood Stained Sputum -->
              <div class="col-md-4">
                <label for="coughBlood" class="form-label">Is sputum blood stained?</label>
                <select class="form-control select2bs4" style="width: 100%;" id="coughBlood">
                  <option value="non-blood stained">No</option>
                  <option value="blood stained">Yes</option>
                </select>
              </div>

              <!-- Difficulty in Breathing -->
              <div class="col-md-4">
                <label for="coughBreathing" class="form-label">Associated with Difficulty in Breathing?</label>
                <select class="form-control select2bs4" style="width: 100%;" id="coughBreathing">
                  <option value="not associated with difficulty in breathing">No</option>
                  <option value="associated with difficulty in breathing">Yes</option>
                </select>
              </div>

              <!-- Chest Pain -->
              <div class="col-md-4">
                <label for="coughPain" class="form-label">Associated with Chest Pain?</label>
                <select class="form-control select2bs4" style="width: 100%;" id="coughPain">
                  <option value="not associated with chest pain">No</option>
                  <option value="associated with chest pain">Yes</option>
                </select>
              </div>

            </div>

            <!-- Button Row -->
            <div class="row mt-4">
              <div class="col text-center">
                <button type="button" class="btn btn-warning px-4" onclick="generateCoughHPI()">Generate & Insert</button>
              </div>
            </div>

          </div>
        </form>
      </div>

    </div>
  </div>
</div>



<script>
  function generateCoughHPI() {
    const days = document.getElementById('coughDaysAgo').value || 'a few';
    const periodicity = document.getElementById('coughPeriodicity').value;
    const sputum = document.getElementById('coughSputum').value;
    const blood = document.getElementById('coughBlood').value;
    const breathing = document.getElementById('coughBreathing').value;
    const pain = document.getElementById('coughPain').value;

    const sentence = `Patient has cough that started ${days} days ago and this is mostly ${periodicity} in periodicity. The cough is ${sputum} in nature, ${blood}. Cough is ${breathing}, and is ${pain}.`;

    const hpiTextarea = document.getElementById('hpi');
    hpiTextarea.value = hpiTextarea.value.trim()
      ? `${hpiTextarea.value.trim()}\n\n${sentence}`
      : sentence;

    $('#coughModal').modal('hide');
  }
</script>

<!-- Flu Modal -->
<div class="modal fade" id="fluModal" tabindex="-1" role="dialog" aria-labelledby="fluModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content shadow-lg rounded">

      <div class="modal-header bg-info text-white">
        <h5 class="modal-title" id="fluModalLabel">Flu - HPI Builder</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">
        <form id="fluForm">
          <div class="container-fluid">
            <div class="row g-3">

              <!-- Flu Start Days Ago -->
              <div class="col-md-4">
                <label for="fluDaysAgo" class="form-label">When did the flu start? (days ago)</label>
                <input type="number" class="form-control" id="fluDaysAgo" min="0" placeholder="e.g. 2">
              </div>

              <!-- Primary Symptom -->
              <div class="col-md-4">
                <label for="fluPrimarySymptom" class="form-label">Primary Symptom Caused</label>
                <select class="form-control select2bs4" style="width: 100%;" id="fluPrimarySymptom">
                  <option value="nose congestion">Nose Congestion</option>
                  <option value="nose dribbling">Nose Dribbling</option>
                </select>
              </div>

              <!-- Malaise Status -->
              <div class="col-md-4">
                <label for="fluMalaise" class="form-label">Malaise Status</label>
                <select class="form-control select2bs4" style="width: 100%;" id="fluMalaise">
                  <option value="generalized malaise which has been there since the same time">Yes</option>
                  <option value="no significant malaise">No</option>
                </select>
              </div>

              <!-- Feeling of Unease -->
              <div class="col-md-4">
                <label for="fluUnease" class="form-label">Feeling of Unease</label>
                <select class="form-control select2bs4" style="width: 100%;" id="fluUnease">
                  <option value="resulting in a feeling of unease">Yes</option>
                  <option value="no complaint of unease">No</option>
                </select>
              </div>

              <!-- Empty space to balance layout -->
              <div class="col-md-8"></div>

            </div>

            <!-- Submit Button Row -->
            <div class="row mt-4">
              <div class="col text-center">
                <button type="button" class="btn btn-info px-4" onclick="generateFluHPI()">Generate & Insert</button>
              </div>
            </div>

          </div>
        </form>
      </div>

    </div>
  </div>
</div>




<script>
  function generateFluHPI() {
    const days = document.getElementById('fluDaysAgo').value || 'a few';
    const symptom = document.getElementById('fluPrimarySymptom').value;
    const malaise = document.getElementById('fluMalaise').value;
    const unease = document.getElementById('fluUnease').value;

    const sentence = `Patient has flu that started about ${days} days ago and this has resulted in ${symptom}, and ${malaise}, ${unease}.`;

    const hpiTextarea = document.getElementById('hpi');
    hpiTextarea.value = hpiTextarea.value.trim()
      ? `${hpiTextarea.value.trim()}\n\n${sentence}`
      : sentence;

    $('#fluModal').modal('hide');
  }
</script>


<!-- Headache Modal -->
<div class="modal fade" id="headacheModal" tabindex="-1" role="dialog" aria-labelledby="headacheModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content shadow-lg rounded">

      <div class="modal-header bg-warning text-dark">
        <h5 class="modal-title" id="headacheModalLabel">Headache - HPI Builder</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">
        <form id="headacheForm">
          <div class="container-fluid">
            <div class="row g-3">

              <!-- Headache Location -->
              <div class="col-md-4">
                <label for="headacheLocation" class="form-label">Location</label>
                <select class="form-control select2bs4" style="width: 100%;" id="headacheLocation">
                  <option value="generalized and not localized on one site">Generalized</option>
                  <option value="localized to the frontal region">Frontal</option>
                  <option value="localized to the side">Side</option>
                  <option value="localized to the back of the head">Back</option>
                </select>
              </div>

              <!-- Severity -->
              <div class="col-md-4">
                <label for="headacheSeverity" class="form-label">Severity</label>
                <select class="form-control select2bs4" style="width: 100%;" id="headacheSeverity">
                  <option value="resulting in severe discomfort">Severe</option>
                  <option value="mild and manageable">Mild</option>
                </select>
              </div>

              <!-- Running Nose -->
              <div class="col-md-4">
                <label for="headacheRunningNose" class="form-label">Running Nose</label>
                <select class="form-control select2bs4" style="width: 100%;" id="headacheRunningNose">
                  <option value="not associated with running nose">Not Associated</option>
                  <option value="associated with running nose">Associated</option>
                </select>
              </div>

              <!-- Nose Congestion -->
              <div class="col-md-4">
                <label for="headacheNoseCongestion" class="form-label">Nose Congestion</label>
                <select class="form-control select2bs4" style="width: 100%;" id="headacheNoseCongestion">
                  <option value="not associated with nose congestion">Not Associated</option>
                  <option value="associated with nose congestion">Associated</option>
                </select>
              </div>

              <!-- Fever History -->
              <div class="col-md-4">
                <label for="headacheFeverHistory" class="form-label">History of Fever</label>
                <select class="form-control select2bs4" style="width: 100%;" id="headacheFeverHistory">
                  <option value="There is no history of fever">No</option>
                  <option value="There is history of fever">Yes</option>
                </select>
              </div>

              <!-- Injury History -->
              <div class="col-md-4">
                <label for="headacheInjury" class="form-label">History of Injury</label>
                <select class="form-control select2bs4" style="width: 100%;" id="headacheInjury">
                  <option value="There is no history of injury">No</option>
                  <option value="There is history of injury">Yes</option>
                </select>
              </div>

            </div>

            <!-- Submit Button -->
            <div class="row mt-4">
              <div class="col text-center">
                <button type="button" class="btn btn-warning px-4" onclick="generateHeadacheHPI()">Generate & Insert</button>
              </div>
            </div>

          </div>
        </form>
      </div>

    </div>
  </div>
</div>




<!-- Fever Modal -->
<div class="modal fade" id="feverModal" tabindex="-1" role="dialog" aria-labelledby="feverModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content shadow-lg rounded">

      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title" id="feverModalLabel">Fever - History of Presenting Illness (HPI)</h5>
        <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">
        <form id="feverHPIForm">
          <div class="container-fluid">
            <div class="row g-3">

              <!-- Grade of Fever -->
              <div class="col-md-4">
                <label for="feverGrade" class="form-label">Grade of Fever</label>
                <select class="form-control select2bs4" style="width: 100%;" id="feverGrade">
                  <option value="">-- Select --</option>
                  <option value="low grade">Low Grade</option>
                  <option value="high grade">High Grade</option>
                </select>
              </div>

              <!-- Fever Pattern -->
              <div class="col-md-4">
                <label for="feverPattern" class="form-label">Fever Pattern</label>
                <select class="form-control select2bs4" style="width: 100%;" id="feverPattern">
                  <option value="">-- Select --</option>
                  <option value="non-specific">Non-specific</option>
                  <option value="mostly at day">Mostly at Day</option>
                  <option value="mostly at night">Mostly at Night</option>
                </select>
              </div>

              <!-- Onset Type -->
              <div class="col-md-4">
                <label for="feverOnset" class="form-label">Onset Type</label>
                <select class="form-control select2bs4" style="width: 100%;" id="feverOnset">
                  <option value="">-- Select --</option>
                  <option value="sudden">Sudden</option>
                  <option value="gradual">Gradual</option>
                </select>
              </div>

              <!-- Duration (days) -->
              <div class="col-md-4">
                <label for="feverDuration" class="form-label">Duration (in days)</label>
                <input type="number" min="0" class="form-control" id="feverDuration" placeholder="Enter number of days">
              </div>

              <!-- Medication Taken -->
              <div class="col-md-4">
                <label for="feverMed" class="form-label">Taken Medication?</label>
                <select class="form-control select2bs4" style="width: 100%;" id="feverMed">
                  <option value="">-- Select --</option>
                  <option value="yes">Yes</option>
                  <option value="no">No</option>
                </select>
              </div>

              <!-- Empty col for alignment -->
              <div class="col-md-4"></div>

            </div>

            <!-- Submit Button -->
            <div class="row mt-4">
              <div class="col text-center">
                <button type="button" class="btn btn-success px-4" onclick="generateFeverHPI()">Generate HPI</button>
              </div>
            </div>
            
          </div>
        </form>
      </div>

    </div>
  </div>
</div>




<!-- ROS Modal -->
<div class="modal fade" id="rosModal" tabindex="-1" role="dialog" aria-labelledby="rosModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Review of Systems (ROS)</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span>&times;</span>
        </button>
      </div>

      <div class="modal-body">
        <!-- Normal / Abnormal toggle -->
        <div class="form-group">
          <label><strong>ROS Status:</strong></label>
          <select class="form-control" id="rosStatus">
            <option value="">-- Select ROS status --</option>
            <option value="normal">Normal</option>
            <option value="abnormal">Abnormal</option>
          </select>
        </div>

        <!-- ROS Options -->
        <div id="rosOptionsSection" style="display: none;">
          <div class="form-check mb-2">
            <input class="form-check-input" type="checkbox" id="rosSelectAll">
            <label class="form-check-label font-weight-bold" for="rosSelectAll">Select All Systems</label>
          </div>

          <div class="container-fluid">
            <div class="row">
              <!-- Left Column -->
              <div class="col-md-6">
                <div class="form-group">
                  <input type="checkbox" class="form-check-input ros-option" data-label="General" id="rosGeneral">
                  <label class="form-check-label" for="rosGeneral">General</label>
                  <textarea class="form-control ros-note mt-1" data-label="General" rows="2" placeholder="Abnormal findings (optional)" disabled></textarea>
                </div>
                <div class="form-group">
                  <input type="checkbox" class="form-check-input ros-option" data-label="Skin" id="rosSkin">
                  <label class="form-check-label" for="rosSkin">Skin</label>
                  <textarea class="form-control ros-note mt-1" data-label="Skin" rows="2" placeholder="Abnormal findings (optional)" disabled></textarea>
                </div>
                <div class="form-group">
                  <input type="checkbox" class="form-check-input ros-option" data-label="HEENT" id="rosHEENT">
                  <label class="form-check-label" for="rosHEENT">HEENT</label>
                  <textarea class="form-control ros-note mt-1" data-label="HEENT" rows="2" placeholder="Abnormal findings (optional)" disabled></textarea>
                </div>
                <div class="form-group">
                  <input type="checkbox" class="form-check-input ros-option" data-label="Cardiovascular" id="rosCardio">
                  <label class="form-check-label" for="rosCardio">Cardiovascular</label>
                  <textarea class="form-control ros-note mt-1" data-label="Cardiovascular" rows="2" placeholder="Abnormal findings (optional)" disabled></textarea>
                </div>
                <div class="form-group">
                  <input type="checkbox" class="form-check-input ros-option" data-label="Respiratory" id="rosRespiratory">
                  <label class="form-check-label" for="rosRespiratory">Respiratory</label>
                  <textarea class="form-control ros-note mt-1" data-label="Respiratory" rows="2" placeholder="Abnormal findings (optional)" disabled></textarea>
                </div>
              </div>

              <!-- Right Column -->
              <div class="col-md-6">
                <div class="form-group">
                  <input type="checkbox" class="form-check-input ros-option" data-label="Gastrointestinal" id="rosGI">
                  <label class="form-check-label" for="rosGI">Gastrointestinal</label>
                  <textarea class="form-control ros-note mt-1" data-label="Gastrointestinal" rows="2" placeholder="Abnormal findings (optional)" disabled></textarea>
                </div>
                <div class="form-group">
                  <input type="checkbox" class="form-check-input ros-option" data-label="Genitourinary" id="rosGU">
                  <label class="form-check-label" for="rosGU">Genitourinary</label>
                  <textarea class="form-control ros-note mt-1" data-label="Genitourinary" rows="2" placeholder="Abnormal findings (optional)" disabled></textarea>
                </div>
                <div class="form-group">
                  <input type="checkbox" class="form-check-input ros-option" data-label="Musculoskeletal" id="rosMSK">
                  <label class="form-check-label" for="rosMSK">Musculoskeletal</label>
                  <textarea class="form-control ros-note mt-1" data-label="Musculoskeletal" rows="2" placeholder="Abnormal findings (optional)" disabled></textarea>
                </div>
                               <div class="form-group">
                  <input type="checkbox" class="form-check-input ros-option" data-label="Neurological" id="rosNeuro">
                  <label class="form-check-label" for="rosNeuro">Neurological</label>
                  <textarea class="form-control ros-note mt-1" data-label="Neurological" rows="2" placeholder="Abnormal findings (optional)" disabled></textarea>
                </div>
                <div class="form-group">
                  <input type="checkbox" class="form-check-input ros-option" data-label="Endocrine" id="rosEndocrine">
                  <label class="form-check-label" for="rosEndocrine">Endocrine</label>
                  <textarea class="form-control ros-note mt-1" data-label="Endocrine" rows="2" placeholder="Abnormal findings (optional)" disabled></textarea>
                </div>
                <div class="form-group">
                  <input type="checkbox" class="form-check-input ros-option" data-label="Hematological" id="rosHeme">
                  <label class="form-check-label" for="rosHeme">Hematological</label>
                  <textarea class="form-control ros-note mt-1" data-label="Hematological" rows="2" placeholder="Abnormal findings (optional)" disabled></textarea>
                </div>
              </div>
            </div>
          </div>
        </div> <!-- end #rosOptionsSection -->
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-primary" id="generateRosSummary">Save</button>
      </div>
    </div>
  </div>
</div>



<!-- Physical Examination Modal -->
<div class="modal fade" id="physicalExamModal" tabindex="-1" role="dialog" aria-labelledby="physicalExamModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title">Physical Examination</h5>
        <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
          <span>&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p class="text-muted">Check abnormal systems and describe findings. Unchecked systems will be assumed normal.</p>
        <form id="physicalExamForm">
          <!-- Dynamic Fields -->
          <div class="form-check mb-2">
            <input class="form-check-input system-check" type="checkbox" id="chkHEENT" value="HEENT">
            <label class="form-check-label" for="chkHEENT">HEENT</label>
            <textarea class="form-control mt-1 system-detail d-none" id="txtHEENT" placeholder="Describe HEENT abnormal findings"></textarea>
          </div>
          <div class="form-check mb-2">
            <input class="form-check-input system-check" type="checkbox" id="chkCardiovascular" value="Cardiovascular">
            <label class="form-check-label" for="chkCardiovascular">Cardiovascular</label>
            <textarea class="form-control mt-1 system-detail d-none" id="txtCardiovascular" placeholder="Describe cardiovascular abnormal findings"></textarea>
          </div>
          <div class="form-check mb-2">
            <input class="form-check-input system-check" type="checkbox" id="chkRespiratory" value="Respiratory">
            <label class="form-check-label" for="chkRespiratory">Respiratory</label>
            <textarea class="form-control mt-1 system-detail d-none" id="txtRespiratory" placeholder="Describe respiratory abnormal findings"></textarea>
          </div>
          <div class="form-check mb-2">
            <input class="form-check-input system-check" type="checkbox" id="chkAbdomen" value="Abdomen">
            <label class="form-check-label" for="chkAbdomen">Abdomen (PA)</label>
            <textarea class="form-control mt-1 system-detail d-none" id="txtAbdomen" placeholder="Describe abdominal abnormal findings"></textarea>
          </div>
          <div class="form-check mb-2">
            <input class="form-check-input system-check" type="checkbox" id="chkMusculoskeletal" value="Musculoskeletal">
            <label class="form-check-label" for="chkMusculoskeletal">Musculoskeletal</label>
            <textarea class="form-control mt-1 system-detail d-none" id="txtMusculoskeletal" placeholder="Describe musculoskeletal abnormal findings"></textarea>
          </div>
          <div class="form-check mb-2">
            <input class="form-check-input system-check" type="checkbox" id="chkNeurological" value="Neurological">
            <label class="form-check-label" for="chkNeurological">Neurological</label>
            <textarea class="form-control mt-1 system-detail d-none" id="txtNeurological" placeholder="Describe neurological abnormal findings"></textarea>
          </div>
          <div class="form-check mb-2">
            <input class="form-check-input system-check" type="checkbox" id="chkSkin" value="Skin">
            <label class="form-check-label" for="chkSkin">Skin</label>
            <textarea class="form-control mt-1 system-detail d-none" id="txtSkin" placeholder="Describe skin abnormal findings"></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-success" id="generatePhysicalExam">Save</button>
      </div>
    </div>
  </div>
</div>





     <!-- Modal -->
<div class="modal fade" id="addPatientVitalModal" tabindex="-1" role="dialog" aria-labelledby="addPatientVitalModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addPatientVitalModalLabel">Add Patient Vital</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="card">
            <div class="card-header">Add Patient Vital</div>
            <div class="card-body">
                <div id="VitalMessageContainer{{ vital.id }}" class="alert" role="alert"></div>
                <form method="post" id="AddPatientVitalForm">
                    {% csrf_token %}
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="respiratory_rate">Respiratory Rate (breaths per minute)</label>
                            <select class="form-control select2bs4" style="width: 100%;" id="respiratoryRate" name="respiratory_rate" required>
                                <option value=""></option>
                                {% for rate in range_15 %}
                                    <option value="{{ rate }}">{{ rate }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <input type="hidden" name="patient_id" id="patient_id" value="{{ patient.id }}">
                        <input type="hidden" name="vital_id" id="vital_id" value="">
                        <input type="hidden" class="form-control" id="visit_id" name="visit_id" value="{{ visit.id }}">
                        <div class="form-group col-md-6">
                            <label for="pulse_rate">Pulse Rate (beats per minute)</label>
                            <select class="form-control select2bs4" style="width: 100%;" id="pulseRate" name="pulse_rate" required>
                                <option value=""></option>
                                {% for rate in range_301 %}
                                    <option value="{{ rate }}">{{ rate }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="sbp">Systolic Blood Pressure (mmHg)</label>
                            <select class="form-control select2bs4" style="width: 100%;" id="sbp" name="sbp" required>
                                <option value=""></option>
                                {% for value in range_301 %}
                                    <option value="{{ value }}">{{ value }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="dbp">Diastolic Blood Pressure (mmHg)</label>
                            <select class="form-control select2bs4" style="width: 100%;" id="dbp" name="dbp" required>
                                <option value=""></option>
                                {% for value in range_301 %}
                                    <option value="{{ value }}">{{ value }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="avpu">AVPU Scale</label>
                            <select class="form-control select2bs4" style="width: 100%;" id="avpu" name="avpu" required>
                                <option value=""></option>
                                <option value="Alert">Alert</option>
                                <option value="Verbal">Verbal</option>
                                <option value="Pain">Pain</option>
                                <option value="Unresponsive">Unresponsive</option>
                            </select>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="spo2">SPO2 (%)</label>
                            <select class="form-control select2bs4" style="width: 100%;" id="spo2" name="spo2" required>
                                <option value=""></option>
                                {% for percentage in range_101 %}
                                    <option value="{{ percentage }}">{{ percentage }}%</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="temperature">Temperature (°C)</label>
                            <select class="form-control select2bs4" style="width: 100%;" id="temperature" name="temperature" required >
                                <option value=""></option>
                                {% for temp in temps %}
                                    <option value="{{ temp }}">{{ temp }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="gcs">Glasgow Coma Scale</label>
                            <select class="form-control select2bs4" style="width: 100%;" id="gcs" name="gcs" required>
                                <option value=""></option>
                                {% for score in range_15  %}
                                    <option value="{{ score }}">{{ score }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>                 
                 
                    <div class="form-row">
                        <div class="col-md-12">
                            <button type="button" class="btn btn-primary btn-block" onclick="addRemotePatientVital()">Add new patient vital</button>
                        </div>
                    </div>
                
                </form>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>
    


